/* esm.sh - esbuild bundle(@radix-ui/react-tooltip@1.0.7) denonext production */
import y from"../../../../../../esm.sh/@babel/runtime@7.23.1/helpers/esm/extends.js";
import{useState as I,useRef as b,useEffect as w,createElement as l,useCallback as T,useMemo as V,forwardRef as D}from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{composeEventHandlers as C}from"../../../../../../esm.sh/_@radix-ui/primitive@1.0.1.js";
import{useComposedRefs as j}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{createContextScope as Y}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{DismissableLayer as q}from"../../../../../../esm.sh/v132/_@radix-ui/react-dismissable-layer@1.0.5.js";
import{useId as X}from"../../../../../../esm.sh/v132/_@radix-ui/react-id@1.0.1.js";
import{createPopperScope as G,Root as W,Anchor as z,Content as J,Arrow as Q}from"../../../../../../esm.sh/v132/_@radix-ui/react-popper@1.1.3.js";
import{Portal as Z}from"../../../../../../esm.sh/v132/_@radix-ui/react-portal@1.0.4.js";
import{Presence as F}from"../../../../../../esm.sh/v132/_@radix-ui/react-presence@1.0.1.js";
import{Primitive as ee}from"../../../../../../esm.sh/v132/_@radix-ui/react-primitive@1.0.3.js";
import{Slottable as te}from"../../../../../../esm.sh/v132/_@radix-ui/react-slot@1.0.2.js";
import{useControllableState as oe}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-controllable-state@1.0.1.js";
import{Root as ne}from"../../../../../../esm.sh/v132/_@radix-ui/react-visually-hidden@1.0.3.js";
var[A,je]=Y("Tooltip",[G]),K=G(),re="TooltipProvider",ae=700,L="tooltip.open",[se,M]=A(re),ce=t=>{let{__scopeTooltip:o,delayDuration:e=ae,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:s}=t,[c,p]=I(!0),a=b(!1),u=b(0);return w(()=>{let i=u.current;return()=>window.clearTimeout(i)},[]),l(se,{scope:o,isOpenDelayed:c,delayDuration:e,onOpen:T(()=>{window.clearTimeout(u.current),p(!1)},[]),onClose:T(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>p(!0),n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:T(i=>{a.current=i},[]),disableHoverableContent:r},s)},H="Tooltip",[ie,R]=A(H),le=t=>{let{__scopeTooltip:o,children:e,open:n,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:c,delayDuration:p}=t,a=M(H,t.__scopeTooltip),u=K(o),[i,$]=I(null),v=X(),d=b(0),f=c??a.disableHoverableContent,h=p??a.delayDuration,m=b(!1),[g=!1,x]=oe({prop:n,defaultProp:r,onChange:N=>{N?(a.onOpen(),document.dispatchEvent(new CustomEvent(L))):a.onClose(),s?.(N)}}),P=V(()=>g?m.current?"delayed-open":"instant-open":"closed",[g]),E=T(()=>{window.clearTimeout(d.current),m.current=!1,x(!0)},[x]),_=T(()=>{window.clearTimeout(d.current),x(!1)},[x]),S=T(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{m.current=!0,x(!0)},h)},[h,x]);return w(()=>()=>window.clearTimeout(d.current),[]),l(W,u,l(ie,{scope:o,contentId:v,open:g,stateAttribute:P,trigger:i,onTriggerChange:$,onTriggerEnter:T(()=>{a.isOpenDelayed?S():E()},[a.isOpenDelayed,S,E]),onTriggerLeave:T(()=>{f?_():window.clearTimeout(d.current)},[_,f]),onOpen:E,onClose:_,disableHoverableContent:f},e))},k="TooltipTrigger",pe=D((t,o)=>{let{__scopeTooltip:e,...n}=t,r=R(k,e),s=M(k,e),c=K(e),p=b(null),a=j(o,p,r.onTriggerChange),u=b(!1),i=b(!1),$=T(()=>u.current=!1,[]);return w(()=>()=>document.removeEventListener("pointerup",$),[$]),l(z,y({asChild:!0},c),l(ee.button,y({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},n,{ref:a,onPointerMove:C(t.onPointerMove,v=>{v.pointerType!=="touch"&&!i.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),i.current=!0)}),onPointerLeave:C(t.onPointerLeave,()=>{r.onTriggerLeave(),i.current=!1}),onPointerDown:C(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",$,{once:!0})}),onFocus:C(t.onFocus,()=>{u.current||r.onOpen()}),onBlur:C(t.onBlur,r.onClose),onClick:C(t.onClick,r.onClose)})))}),B="TooltipPortal",[ue,$e]=A(B,{forceMount:void 0}),de=t=>{let{__scopeTooltip:o,forceMount:e,children:n,container:r}=t,s=R(B,o);return l(ue,{scope:o,forceMount:e},l(F,{present:e||s.open},l(Z,{asChild:!0,container:r},n)))},O="TooltipContent",fe=D((t,o)=>{let e=$e(O,t.__scopeTooltip),{forceMount:n=e.forceMount,side:r="top",...s}=t,c=R(O,t.__scopeTooltip);return l(F,{present:n||c.open},c.disableHoverableContent?l(U,y({side:r},s,{ref:o})):l(ve,y({side:r},s,{ref:o})))}),ve=D((t,o)=>{let e=R(O,t.__scopeTooltip),n=M(O,t.__scopeTooltip),r=b(null),s=j(o,r),[c,p]=I(null),{trigger:a,onClose:u}=e,i=r.current,{onPointerInTransitChange:$}=n,v=T(()=>{p(null),$(!1)},[$]),d=T((f,h)=>{let m=f.currentTarget,g={x:f.clientX,y:f.clientY},x=ge(g,m.getBoundingClientRect()),P=be(g,x),E=we(h.getBoundingClientRect()),_=Ce([...P,...E]);p(_),$(!0)},[$]);return w(()=>()=>v(),[v]),w(()=>{if(a&&i){let f=m=>d(m,i),h=m=>d(m,a);return a.addEventListener("pointerleave",f),i.addEventListener("pointerleave",h),()=>{a.removeEventListener("pointerleave",f),i.removeEventListener("pointerleave",h)}}},[a,i,d,v]),w(()=>{if(c){let f=h=>{let m=h.target,g={x:h.clientX,y:h.clientY},x=a?.contains(m)||i?.contains(m),P=!ye(g,c);x?v():P&&(v(),u())};return document.addEventListener("pointermove",f),()=>document.removeEventListener("pointermove",f)}},[a,i,c,u,v]),l(U,y({},t,{ref:s}))}),[me,he]=A(H,{isInside:!1}),U=D((t,o)=>{let{__scopeTooltip:e,children:n,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:c,...p}=t,a=R(O,e),u=K(e),{onClose:i}=a;return w(()=>(document.addEventListener(L,i),()=>document.removeEventListener(L,i)),[i]),w(()=>{if(a.trigger){let $=v=>{let d=v.target;d!=null&&d.contains(a.trigger)&&i()};return window.addEventListener("scroll",$,{capture:!0}),()=>window.removeEventListener("scroll",$,{capture:!0})}},[a.trigger,i]),l(q,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:$=>$.preventDefault(),onDismiss:i},l(J,y({"data-state":a.stateAttribute},u,p,{ref:o,style:{...p.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),l(te,null,n),l(me,{scope:e,isInside:!0},l(ne,{id:a.contentId,role:"tooltip"},r||n))))}),Te="TooltipArrow",xe=D((t,o)=>{let{__scopeTooltip:e,...n}=t,r=K(e);return he(Te,e).isInside?null:l(Q,y({},r,n,{ref:o}))});function ge(t,o){let e=Math.abs(o.top-t.y),n=Math.abs(o.bottom-t.y),r=Math.abs(o.right-t.x),s=Math.abs(o.left-t.x);switch(Math.min(e,n,r,s)){case s:return"left";case r:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function be(t,o,e=5){let n=[];switch(o){case"top":n.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":n.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":n.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":n.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return n}function we(t){let{top:o,right:e,bottom:n,left:r}=t;return[{x:r,y:o},{x:e,y:o},{x:e,y:n},{x:r,y:n}]}function ye(t,o){let{x:e,y:n}=t,r=!1;for(let s=0,c=o.length-1;s<o.length;c=s++){let p=o[s].x,a=o[s].y,u=o[c].x,i=o[c].y;a>n!=i>n&&e<(u-p)*(n-a)/(i-a)+p&&(r=!r)}return r}function Ce(t){let o=t.slice();return o.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),Pe(o)}function Pe(t){if(t.length<=1)return t.slice();let o=[];for(let n=0;n<t.length;n++){let r=t[n];for(;o.length>=2;){let s=o[o.length-1],c=o[o.length-2];if((s.x-c.x)*(r.y-c.y)>=(s.y-c.y)*(r.x-c.x))o.pop();else break}o.push(r)}o.pop();let e=[];for(let n=t.length-1;n>=0;n--){let r=t[n];for(;e.length>=2;){let s=e[e.length-1],c=e[e.length-2];if((s.x-c.x)*(r.y-c.y)>=(s.y-c.y)*(r.x-c.x))e.pop();else break}e.push(r)}return e.pop(),o.length===1&&e.length===1&&o[0].x===e[0].x&&o[0].y===e[0].y?o:o.concat(e)}var Ge=ce,Fe=le,Be=pe,Ue=de,Ve=fe,Ye=xe;export{Ye as Arrow,Ve as Content,Ue as Portal,Ge as Provider,Fe as Root,le as Tooltip,xe as TooltipArrow,fe as TooltipContent,de as TooltipPortal,ce as TooltipProvider,pe as TooltipTrigger,Be as Trigger,je as createTooltipScope};
//# sourceMappingURL=react-tooltip.mjs.map