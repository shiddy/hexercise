/* esm.sh - esbuild bundle(@radix-ui/react-popover@1.0.7) denonext production */
import i from"../../../../../../esm.sh/@babel/runtime@7.23.1/helpers/esm/extends.js";
import{useRef as b,useState as M,createElement as p,useCallback as O,forwardRef as u,useEffect as _}from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{composeEventHandlers as m}from"../../../../../../esm.sh/_@radix-ui/primitive@1.0.1.js";
import{useComposedRefs as A}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{createContextScope as I}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{DismissableLayer as T}from"../../../../../../esm.sh/v132/_@radix-ui/react-dismissable-layer@1.0.5.js";
import{useFocusGuards as k}from"../../../../../../esm.sh/v132/_@radix-ui/react-focus-guards@1.0.1.js";
import{FocusScope as j}from"../../../../../../esm.sh/v132/_@radix-ui/react-focus-scope@1.0.4.js";
import{useId as L}from"../../../../../../esm.sh/v132/_@radix-ui/react-id@1.0.1.js";
import{createPopperScope as x,Root as G,Anchor as R,Content as H,Arrow as K}from"../../../../../../esm.sh/v132/_@radix-ui/react-popper@1.1.3.js";
import{Portal as U}from"../../../../../../esm.sh/v132/_@radix-ui/react-portal@1.0.4.js";
import{Presence as E}from"../../../../../../esm.sh/v132/_@radix-ui/react-presence@1.0.1.js";
import{Primitive as F}from"../../../../../../esm.sh/v132/_@radix-ui/react-primitive@1.0.3.js";
import{Slot as V}from"../../../../../../esm.sh/v132/_@radix-ui/react-slot@1.0.2.js";
import{useControllableState as W}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-controllable-state@1.0.1.js";
import{hideOthers as Z}from"../../../../../../esm.sh/aria-hidden@1.2.3.js";
import{RemoveScroll as q}from"../../../../../../esm.sh/v132/_react-remove-scroll@2.5.6.js";
var S="Popover",[w,Eo]=I(S,[x]),g=x(),[z,d]=w(S),B=o=>{let{__scopePopover:s,children:c,open:a,defaultOpen:e,onOpenChange:t,modal:r=!1}=o,n=g(s),l=b(null),[f,P]=M(!1),[h=!1,$]=W({prop:a,defaultProp:e,onChange:t});return p(G,n,p(z,{scope:s,contentId:L(),triggerRef:l,open:h,onOpenChange:$,onOpenToggle:O(()=>$(C=>!C),[$]),hasCustomAnchor:f,onCustomAnchorAdd:O(()=>P(!0),[]),onCustomAnchorRemove:O(()=>P(!1),[]),modal:r},c))},J="PopoverAnchor",Q=u((o,s)=>{let{__scopePopover:c,...a}=o,e=d(J,c),t=g(c),{onCustomAnchorAdd:r,onCustomAnchorRemove:n}=e;return _(()=>(r(),()=>n()),[r,n]),p(R,i({},t,a,{ref:s}))}),X="PopoverTrigger",Y=u((o,s)=>{let{__scopePopover:c,...a}=o,e=d(X,c),t=g(c),r=A(s,e.triggerRef),n=p(F.button,i({type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":N(e.open)},a,{ref:r,onClick:m(o.onClick,e.onOpenToggle)}));return e.hasCustomAnchor?n:p(R,i({asChild:!0},t),n)}),y="PopoverPortal",[oo,eo]=w(y,{forceMount:void 0}),to=o=>{let{__scopePopover:s,forceMount:c,children:a,container:e}=o,t=d(y,s);return p(oo,{scope:s,forceMount:c},p(E,{present:c||t.open},p(U,{asChild:!0,container:e},a)))},v="PopoverContent",co=u((o,s)=>{let c=eo(v,o.__scopePopover),{forceMount:a=c.forceMount,...e}=o,t=d(v,o.__scopePopover);return p(E,{present:a||t.open},t.modal?p(ro,i({},e,{ref:s})):p(no,i({},e,{ref:s})))}),ro=u((o,s)=>{let c=d(v,o.__scopePopover),a=b(null),e=A(s,a),t=b(!1);return _(()=>{let r=a.current;if(r)return Z(r)},[]),p(q,{as:V,allowPinchZoom:!0},p(D,i({},o,{ref:e,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:m(o.onCloseAutoFocus,r=>{var n;r.preventDefault(),t.current||(n=c.triggerRef.current)===null||n===void 0||n.focus()}),onPointerDownOutside:m(o.onPointerDownOutside,r=>{let n=r.detail.originalEvent,l=n.button===0&&n.ctrlKey===!0,f=n.button===2||l;t.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:m(o.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1})})))}),no=u((o,s)=>{let c=d(v,o.__scopePopover),a=b(!1),e=b(!1);return p(D,i({},o,{ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r;if((r=o.onCloseAutoFocus)===null||r===void 0||r.call(o,t),!t.defaultPrevented){var n;a.current||(n=c.triggerRef.current)===null||n===void 0||n.focus(),t.preventDefault()}a.current=!1,e.current=!1},onInteractOutside:t=>{var r,n;(r=o.onInteractOutside)===null||r===void 0||r.call(o,t),t.defaultPrevented||(a.current=!0,t.detail.originalEvent.type==="pointerdown"&&(e.current=!0));let l=t.target;((n=c.triggerRef.current)===null||n===void 0?void 0:n.contains(l))&&t.preventDefault(),t.detail.originalEvent.type==="focusin"&&e.current&&t.preventDefault()}}))}),D=u((o,s)=>{let{__scopePopover:c,trapFocus:a,onOpenAutoFocus:e,onCloseAutoFocus:t,disableOutsidePointerEvents:r,onEscapeKeyDown:n,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:P,...h}=o,$=d(v,c),C=g(c);return k(),p(j,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:e,onUnmountAutoFocus:t},p(T,{asChild:!0,disableOutsidePointerEvents:r,onInteractOutside:P,onEscapeKeyDown:n,onPointerDownOutside:l,onFocusOutside:f,onDismiss:()=>$.onOpenChange(!1)},p(H,i({"data-state":N($.open),role:"dialog",id:$.contentId},C,h,{ref:s,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),so="PopoverClose",ao=u((o,s)=>{let{__scopePopover:c,...a}=o,e=d(so,c);return p(F.button,i({type:"button"},a,{ref:s,onClick:m(o.onClick,()=>e.onOpenChange(!1))}))});var po=u((o,s)=>{let{__scopePopover:c,...a}=o,e=g(c);return p(K,i({},e,a,{ref:s}))});function N(o){return o?"open":"closed"}var Fo=B,So=Q,wo=Y,yo=to,Do=co,No=ao,Mo=po;export{So as Anchor,Mo as Arrow,No as Close,Do as Content,B as Popover,Q as PopoverAnchor,po as PopoverArrow,ao as PopoverClose,co as PopoverContent,to as PopoverPortal,Y as PopoverTrigger,yo as Portal,Fo as Root,wo as Trigger,Eo as createPopoverScope};
//# sourceMappingURL=react-popover.mjs.map