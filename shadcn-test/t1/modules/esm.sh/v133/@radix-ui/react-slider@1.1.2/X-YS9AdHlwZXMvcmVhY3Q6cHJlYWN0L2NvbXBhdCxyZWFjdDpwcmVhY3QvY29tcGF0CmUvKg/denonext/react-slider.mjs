/* org: esm.sh - esbuild bundle(@radix-ui/react-slider@1.1.2) denonext production */
/* this file is created from "./Slider.tsx" */
import*as r from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{clamp as W}from"../../../../../../esm.sh/@radix-ui/number@1.0.1.js";
import{composeEventHandlers as v}from"../../../../../../esm.sh/_@radix-ui/primitive@1.0.1.js";
import{useComposedRefs as k}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{createContextScope as ie}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{useControllableState as se}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-controllable-state@1.0.1.js";
import{useDirection as ae}from"../../../../../../esm.sh/v132/_@radix-ui/react-direction@1.0.1.js";
import{usePrevious as ce}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-previous@1.0.1.js";
import{useSize as le}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-size@1.0.1.js";
import{Primitive as I}from"../../../../../../esm.sh/v132/_@radix-ui/react-primitive@1.0.3.js";
import{createCollection as de}from"../../../../../../esm.sh/v132/_@radix-ui/react-collection@1.0.3.js";
const j=["PageUp","PageDown"],q=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],J={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},C="Slider",[z,ue,fe]=de(C),[Q,me]=ie(C,[fe]),[Se,A]=Q(C),H=r.forwardRef((e,t)=>{const{name:o,min:n=0,max:i=100,step:a=1,orientation:p="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:S=[n],value:m,onValueChange:s=()=>{},onValueCommit:f=()=>{},inverted:g=!1,...b}=e,h=r.useRef(new Set),d=r.useRef(0),M=p==="horizontal"?pe:he,[u=[],R]=se({prop:m,defaultProp:S,onChange:w=>{[...h.current][d.current]?.focus(),s(w)}}),P=r.useRef(u);function $(w){const y=Re(u,w);_(w,y)}function V(w){_(w,d.current)}function re(){const w=P.current[d.current];u[d.current]!==w&&f(u)}function _(w,y,{commit:T}={commit:!1}){const X=De(a),B=ve(Math.round((w-n)/a)*a+n,X),K=W(B,[n,i]);R((D=[])=>{const x=be(D,K,y);if(Pe(x,c*a)){d.current=x.indexOf(K);const G=String(x)!==String(D);return G&&T&&f(x),G?x:D}else return D})}return r.createElement(Se,{scope:e.__scopeSlider,name:o,disabled:l,min:n,max:i,valueIndexToChangeRef:d,thumbs:h.current,values:u,orientation:p},r.createElement(z.Provider,{scope:e.__scopeSlider},r.createElement(z.Slot,{scope:e.__scopeSlider},r.createElement(M,{"aria-disabled":l,"data-disabled":l?"":void 0,...b,ref:t,onPointerDown:v(b.onPointerDown,()=>{l||(P.current=u)}),min:n,max:i,inverted:g,onSlideStart:l?void 0:$,onSlideMove:l?void 0:V,onSlideEnd:l?void 0:re,onHomeKeyDown:()=>!l&&_(n,0,{commit:!0}),onEndKeyDown:()=>!l&&_(i,u.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:y})=>{if(!l){const B=j.includes(w.key)||w.shiftKey&&q.includes(w.key)?10:1,K=d.current,D=u[K],x=a*B*y;_(D+x,K,{commit:!0})}}}))))});H.displayName=C;const[Z,ee]=Q(C,{startEdge:"left",endEdge:"right",size:"width",direction:1}),pe=r.forwardRef((e,t)=>{const{min:o,max:n,dir:i,inverted:a,onSlideStart:p,onSlideMove:l,onSlideEnd:c,onStepKeyDown:S,...m}=e,[s,f]=r.useState(null),g=k(t,u=>f(u)),b=r.useRef(),h=ae(i),d=h==="ltr",E=d&&!a||!d&&a;function M(u){const R=b.current||s.getBoundingClientRect(),P=[0,R.width],V=Y(P,E?[o,n]:[n,o]);return b.current=R,V(u-R.left)}return r.createElement(Z,{scope:e.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width"},r.createElement(te,{dir:h,"data-orientation":"horizontal",...m,ref:g,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:u=>{const R=M(u.clientX);p?.(R)},onSlideMove:u=>{const R=M(u.clientX);l?.(R)},onSlideEnd:()=>{b.current=void 0,c?.()},onStepKeyDown:u=>{const P=J[E?"from-left":"from-right"].includes(u.key);S?.({event:u,direction:P?-1:1})}}))}),he=r.forwardRef((e,t)=>{const{min:o,max:n,inverted:i,onSlideStart:a,onSlideMove:p,onSlideEnd:l,onStepKeyDown:c,...S}=e,m=r.useRef(null),s=k(t,m),f=r.useRef(),g=!i;function b(h){const d=f.current||m.current.getBoundingClientRect(),E=[0,d.height],u=Y(E,g?[n,o]:[o,n]);return f.current=d,u(h-d.top)}return r.createElement(Z,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1},r.createElement(te,{"data-orientation":"vertical",...S,ref:s,style:{...S.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{const d=b(h.clientY);a?.(d)},onSlideMove:h=>{const d=b(h.clientY);p?.(d)},onSlideEnd:()=>{f.current=void 0,l?.()},onStepKeyDown:h=>{const E=J[g?"from-bottom":"from-top"].includes(h.key);c?.({event:h,direction:E?-1:1})}}))}),te=r.forwardRef((e,t)=>{const{__scopeSlider:o,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:p,onEndKeyDown:l,onStepKeyDown:c,...S}=e,m=A(C,o);return r.createElement(I.span,{...S,ref:t,onKeyDown:v(e.onKeyDown,s=>{s.key==="Home"?(p(s),s.preventDefault()):s.key==="End"?(l(s),s.preventDefault()):j.concat(q).includes(s.key)&&(c(s),s.preventDefault())}),onPointerDown:v(e.onPointerDown,s=>{const f=s.target;f.setPointerCapture(s.pointerId),s.preventDefault(),m.thumbs.has(f)?f.focus():n(s)}),onPointerMove:v(e.onPointerMove,s=>{s.target.hasPointerCapture(s.pointerId)&&i(s)}),onPointerUp:v(e.onPointerUp,s=>{const f=s.target;f.hasPointerCapture(s.pointerId)&&(f.releasePointerCapture(s.pointerId),a(s))})})}),ne="SliderTrack",N=r.forwardRef((e,t)=>{const{__scopeSlider:o,...n}=e,i=A(ne,o);return r.createElement(I.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})});N.displayName=ne;const O="SliderRange",L=r.forwardRef((e,t)=>{const{__scopeSlider:o,...n}=e,i=A(O,o),a=ee(O,o),p=r.useRef(null),l=k(t,p),c=i.values.length,S=i.values.map(f=>oe(f,i.min,i.max)),m=c>1?Math.min(...S):0,s=100-Math.max(...S);return r.createElement(I.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:l,style:{...e.style,[a.startEdge]:m+"%",[a.endEdge]:s+"%"}})});L.displayName=O;const F="SliderThumb",U=r.forwardRef((e,t)=>{const o=ue(e.__scopeSlider),n=r.useRef(null),[i,a]=r.useState(n.current),p=r.useMemo(()=>i?o().findIndex(l=>l.ref.current===i):-1,[o,i]);return r.createElement(ge,{...e,thumbRef:n,setter:a,index:p})}),ge=r.forwardRef((e,t)=>{const{__scopeSlider:o,index:n,name:i,thumbRef:a,setter:p,...l}=e,c=A(F,o),S=ee(F,o),m=a.current,s=m?!!m.closest("form"):!0,f=le(m),g=c.values[n],b=g===void 0?0:oe(g,c.min,c.max),h=Ee(n,c.values.length),d=f?.[S.size],E=d?ye(d,b,S.direction):0;return r.useEffect(()=>{if(m)return c.thumbs.add(m),()=>{c.thumbs.delete(m)}},[m,c.thumbs]),r.useEffect(()=>{a.current&&p(a.current)},[a]),r.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[S.startEdge]:`calc(${b}% + ${E}px)`}},r.createElement(z.ItemSlot,{scope:e.__scopeSlider},r.createElement(I.span,{role:"slider","aria-label":e["aria-label"]||h,"aria-valuemin":c.min,"aria-valuenow":g,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:a,style:g===void 0?{display:"none"}:e.style,onFocus:v(e.onFocus,()=>{c.valueIndexToChangeRef.current=n})})),s&&r.createElement(we,{key:n,name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),value:g}))});U.displayName=F;const we=e=>{const{value:t,...o}=e,n=r.useRef(null),i=ce(t);return r.useEffect(()=>{const a=n.current,p=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(p,"value").set;if(i!==t&&c){const S=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(S)}},[i,t]),r.createElement("input",{style:{display:"none"},...o,ref:n,defaultValue:t})};function be(e=[],t,o){const n=[...e];return n[o]=t,n.sort((i,a)=>i-a)}function oe(e,t,o){const a=100/(o-t)*(e-t);return W(a,[0,100])}function Ee(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Re(e,t){if(e.length===1)return 0;const o=e.map(i=>Math.abs(i-t)),n=Math.min(...o);return o.indexOf(n)}function ye(e,t,o){const n=e/2,a=Y([0,50],[0,n]);return(n-a(t)*o)*o}function xe(e){return e.slice(0,-1).map((t,o)=>e[o+1]-t)}function Pe(e,t){if(t>0){const o=xe(e);return Math.min(...o)>=t}return!0}function Y(e,t){return o=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(o-e[0])}}function De(e){return(String(e).split(".")[1]||"").length}function ve(e,t){const o=Math.pow(10,t);return Math.round(e*o)/o}const Ce=H,Me=N,_e=L,Ke=U;export{me as createSliderScope,H as Slider,N as SliderTrack,L as SliderRange,U as SliderThumb,Ce as Root,Me as Track,_e as Range,Ke as Thumb};
