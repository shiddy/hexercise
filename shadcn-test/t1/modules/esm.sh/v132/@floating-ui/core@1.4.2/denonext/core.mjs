/* esm.sh - esbuild bundle(@floating-ui/core@1.4.2) denonext production */
import{getSideAxis as W,getAlignmentAxis as K,getAxisLength as N,getSide as M,getAlignment as H,evaluate as D,getPaddingObject as I,rectToClientRect as X,min as V,clamp as z,placements as $,getAlignmentSides as Q,getOppositeAlignmentPlacement as ee,getOppositePlacement as te,getExpandedPlacements as ne,getOppositeAxisPlacements as ie,sides as oe,max as F,getOppositeAxis as U}from"../../../../v132/@floating-ui/utils@0.1.3/denonext/utils.mjs";
import{rectToClientRect as Ae}from"../../../../v132/@floating-ui/utils@0.1.3/denonext/utils.mjs";
function q(e,t,l){let{reference:s,floating:i}=e,n=W(t),r=K(t),v=N(r),m=M(t),g=n==="y",u=s.x+s.width/2-i.width/2,c=s.y+s.height/2-i.height/2,f=s[v]/2-i[v]/2,o;switch(m){case"top":o={x:u,y:s.y-i.height};break;case"bottom":o={x:u,y:s.y+s.height};break;case"right":o={x:s.x+s.width,y:c};break;case"left":o={x:s.x-i.width,y:c};break;default:o={x:s.x,y:s.y}}switch(H(t)){case"start":o[r]-=f*(l&&g?-1:1);break;case"end":o[r]+=f*(l&&g?-1:1);break}return o}var ae=async(e,t,l)=>{let{placement:s="bottom",strategy:i="absolute",middleware:n=[],platform:r}=l,v=n.filter(Boolean),m=await(r.isRTL==null?void 0:r.isRTL(t)),g=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:c}=q(g,s,m),f=s,o={},a=0;for(let x=0;x<v.length;x++){let{name:d,fn:y}=v[x],{x:w,y:p,data:A,reset:h}=await y({x:u,y:c,initialPlacement:s,placement:f,strategy:i,middlewareData:o,rects:g,platform:r,elements:{reference:e,floating:t}});if(u=w??u,c=p??c,o={...o,[d]:{...o[d],...A}},h&&a<=50){a++,typeof h=="object"&&(h.placement&&(f=h.placement),h.rects&&(g=h.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:i}):h.rects),{x:u,y:c}=q(g,f,m)),x=-1;continue}}return{x:u,y:c,placement:f,strategy:i,middlewareData:o}};async function j(e,t){var l;t===void 0&&(t={});let{x:s,y:i,platform:n,rects:r,elements:v,strategy:m}=e,{boundary:g="clippingAncestors",rootBoundary:u="viewport",elementContext:c="floating",altBoundary:f=!1,padding:o=0}=D(t,e),a=I(o),d=v[f?c==="floating"?"reference":"floating":c],y=X(await n.getClippingRect({element:(l=await(n.isElement==null?void 0:n.isElement(d)))==null||l?d:d.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(v.floating)),boundary:g,rootBoundary:u,strategy:m})),w=c==="floating"?{...r.floating,x:s,y:i}:r.reference,p=await(n.getOffsetParent==null?void 0:n.getOffsetParent(v.floating)),A=await(n.isElement==null?void 0:n.isElement(p))?await(n.getScale==null?void 0:n.getScale(p))||{x:1,y:1}:{x:1,y:1},h=X(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:p,strategy:m}):w);return{top:(y.top-h.top+a.top)/A.y,bottom:(h.bottom-y.bottom+a.bottom)/A.y,left:(y.left-h.left+a.left)/A.x,right:(h.right-y.right+a.right)/A.x}}var fe=e=>({name:"arrow",options:e,async fn(t){let{x:l,y:s,placement:i,rects:n,platform:r,elements:v,middlewareData:m}=t,{element:g,padding:u=0}=D(e,t)||{};if(g==null)return{};let c=I(u),f={x:l,y:s},o=K(i),a=N(o),x=await r.getDimensions(g),d=o==="y",y=d?"top":"left",w=d?"bottom":"right",p=d?"clientHeight":"clientWidth",A=n.reference[a]+n.reference[o]-f[o]-n.floating[a],h=f[o]-n.reference[o],b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(g)),R=b?b[p]:0;(!R||!await(r.isElement==null?void 0:r.isElement(b)))&&(R=v.floating[p]||n.floating[a]);let B=A/2-h/2,T=R/2-x[a]/2-1,P=V(c[y],T),O=V(c[w],T),E=P,S=R-x[a]-O,C=R/2-x[a]/2+B,k=z(E,C,S),L=!m.arrow&&H(i)!=null&&C!=k&&n.reference[a]/2-(C<E?P:O)-x[a]/2<0,Y=L?C<E?E-C:S-C:0;return{[o]:f[o]-Y,data:{[o]:k,centerOffset:C-k+Y},reset:L}}});function se(e,t,l){return(e?[...l.filter(i=>H(i)===e),...l.filter(i=>H(i)!==e)]:l.filter(i=>M(i)===i)).filter(i=>e?H(i)===e||(t?ee(i)!==i:!1):!0)}var me=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var l,s,i;let{rects:n,middlewareData:r,placement:v,platform:m,elements:g}=t,{crossAxis:u=!1,alignment:c,allowedPlacements:f=$,autoAlignment:o=!0,...a}=D(e,t),x=c!==void 0||f===$?se(c||null,o,f):f,d=await j(t,a),y=((l=r.autoPlacement)==null?void 0:l.index)||0,w=x[y];if(w==null)return{};let p=Q(w,n,await(m.isRTL==null?void 0:m.isRTL(g.floating)));if(v!==w)return{reset:{placement:x[0]}};let A=[d[M(w)],d[p[0]],d[p[1]]],h=[...((s=r.autoPlacement)==null?void 0:s.overflows)||[],{placement:w,overflows:A}],b=x[y+1];if(b)return{data:{index:y+1,overflows:h},reset:{placement:b}};let R=h.map(P=>{let O=H(P.placement);return[P.placement,O&&u?P.overflows.slice(0,2).reduce((E,S)=>E+S,0):P.overflows[0],P.overflows]}).sort((P,O)=>P[1]-O[1]),T=((i=R.filter(P=>P[2].slice(0,H(P[0])?2:3).every(O=>O<=0))[0])==null?void 0:i[0])||R[0][0];return T!==v?{data:{index:y+1,overflows:h},reset:{placement:T}}:{}}}},de=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var l;let{placement:s,middlewareData:i,rects:n,initialPlacement:r,platform:v,elements:m}=t,{mainAxis:g=!0,crossAxis:u=!0,fallbackPlacements:c,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:o="none",flipAlignment:a=!0,...x}=D(e,t),d=M(s),y=M(r)===r,w=await(v.isRTL==null?void 0:v.isRTL(m.floating)),p=c||(y||!a?[te(r)]:ne(r));!c&&o!=="none"&&p.push(...ie(r,a,o,w));let A=[r,...p],h=await j(t,x),b=[],R=((l=i.flip)==null?void 0:l.overflows)||[];if(g&&b.push(h[d]),u){let O=Q(s,n,w);b.push(h[O[0]],h[O[1]])}if(R=[...R,{placement:s,overflows:b}],!b.every(O=>O<=0)){var B,T;let O=(((B=i.flip)==null?void 0:B.index)||0)+1,E=A[O];if(E)return{data:{index:O,overflows:R},reset:{placement:E}};let S=(T=R.filter(C=>C.overflows[0]<=0).sort((C,k)=>C.overflows[1]-k.overflows[1])[0])==null?void 0:T.placement;if(!S)switch(f){case"bestFit":{var P;let C=(P=R.map(k=>[k.placement,k.overflows.filter(L=>L>0).reduce((L,Y)=>L+Y,0)]).sort((k,L)=>k[1]-L[1])[0])==null?void 0:P[0];C&&(S=C);break}case"initialPlacement":S=r;break}if(s!==S)return{reset:{placement:S}}}return{}}}};function G(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function J(e){return oe.some(t=>e[t]>=0)}var ue=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){let{rects:l}=t,{strategy:s="referenceHidden",...i}=D(e,t);switch(s){case"referenceHidden":{let n=await j(t,{...i,elementContext:"reference"}),r=G(n,l.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:J(r)}}}case"escaped":{let n=await j(t,{...i,altBoundary:!0}),r=G(n,l.floating);return{data:{escapedOffsets:r,escaped:J(r)}}}default:return{}}}}};function Z(e){let t=V(...e.map(n=>n.left)),l=V(...e.map(n=>n.top)),s=F(...e.map(n=>n.right)),i=F(...e.map(n=>n.bottom));return{x:t,y:l,width:s-t,height:i-l}}function ce(e){let t=e.slice().sort((i,n)=>i.y-n.y),l=[],s=null;for(let i=0;i<t.length;i++){let n=t[i];!s||n.y-s.y>s.height/2?l.push([n]):l[l.length-1].push(n),s=n}return l.map(i=>X(Z(i)))}var ge=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){let{placement:l,elements:s,rects:i,platform:n,strategy:r}=t,{padding:v=2,x:m,y:g}=D(e,t),u=Array.from(await(n.getClientRects==null?void 0:n.getClientRects(s.reference))||[]),c=ce(u),f=X(Z(u)),o=I(v);function a(){if(c.length===2&&c[0].left>c[1].right&&m!=null&&g!=null)return c.find(d=>m>d.left-o.left&&m<d.right+o.right&&g>d.top-o.top&&g<d.bottom+o.bottom)||f;if(c.length>=2){if(W(l)==="y"){let P=c[0],O=c[c.length-1],E=M(l)==="top",S=P.top,C=O.bottom,k=E?P.left:O.left,L=E?P.right:O.right,Y=L-k,_=C-S;return{top:S,bottom:C,left:k,right:L,width:Y,height:_,x:k,y:S}}let d=M(l)==="left",y=F(...c.map(P=>P.right)),w=V(...c.map(P=>P.left)),p=c.filter(P=>d?P.left===w:P.right===y),A=p[0].top,h=p[p.length-1].bottom,b=w,R=y,B=R-b,T=h-A;return{top:A,bottom:h,left:b,right:R,width:B,height:T,x:b,y:A}}return f}let x=await n.getElementRects({reference:{getBoundingClientRect:a},floating:s.floating,strategy:r});return i.reference.x!==x.reference.x||i.reference.y!==x.reference.y||i.reference.width!==x.reference.width||i.reference.height!==x.reference.height?{reset:{rects:x}}:{}}}};async function le(e,t){let{placement:l,platform:s,elements:i}=e,n=await(s.isRTL==null?void 0:s.isRTL(i.floating)),r=M(l),v=H(l),m=W(l)==="y",g=["left","top"].includes(r)?-1:1,u=n&&m?-1:1,c=D(t,e),{mainAxis:f,crossAxis:o,alignmentAxis:a}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...c};return v&&typeof a=="number"&&(o=v==="end"?a*-1:a),m?{x:o*u,y:f*g}:{x:f*g,y:o*u}}var xe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){let{x:l,y:s}=t,i=await le(t,e);return{x:l+i.x,y:s+i.y,data:i}}}},he=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:l,y:s,placement:i}=t,{mainAxis:n=!0,crossAxis:r=!1,limiter:v={fn:d=>{let{x:y,y:w}=d;return{x:y,y:w}}},...m}=D(e,t),g={x:l,y:s},u=await j(t,m),c=W(M(i)),f=U(c),o=g[f],a=g[c];if(n){let d=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=o+u[d],p=o-u[y];o=z(w,o,p)}if(r){let d=c==="y"?"top":"left",y=c==="y"?"bottom":"right",w=a+u[d],p=a-u[y];a=z(w,a,p)}let x=v.fn({...t,[f]:o,[c]:a});return{...x,data:{x:x.x-l,y:x.y-s}}}}},pe=function(e){return e===void 0&&(e={}),{options:e,fn(t){let{x:l,y:s,placement:i,rects:n,middlewareData:r}=t,{offset:v=0,mainAxis:m=!0,crossAxis:g=!0}=D(e,t),u={x:l,y:s},c=W(i),f=U(c),o=u[f],a=u[c],x=D(v,t),d=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(m){let p=f==="y"?"height":"width",A=n.reference[f]-n.floating[p]+d.mainAxis,h=n.reference[f]+n.reference[p]-d.mainAxis;o<A?o=A:o>h&&(o=h)}if(g){var y,w;let p=f==="y"?"width":"height",A=["top","left"].includes(M(i)),h=n.reference[c]-n.floating[p]+(A&&((y=r.offset)==null?void 0:y[c])||0)+(A?0:d.crossAxis),b=n.reference[c]+n.reference[p]+(A?0:((w=r.offset)==null?void 0:w[c])||0)-(A?d.crossAxis:0);a<h?a=h:a>b&&(a=b)}return{[f]:o,[c]:a}}}},we=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){let{placement:l,rects:s,platform:i,elements:n}=t,{apply:r=()=>{},...v}=D(e,t),m=await j(t,v),g=M(l),u=H(l),c=W(l)==="y",{width:f,height:o}=s.floating,a,x;g==="top"||g==="bottom"?(a=g,x=u===(await(i.isRTL==null?void 0:i.isRTL(n.floating))?"start":"end")?"left":"right"):(x=g,a=u==="end"?"top":"bottom");let d=o-m[a],y=f-m[x],w=!t.middlewareData.shift,p=d,A=y;if(c){let b=f-m.left-m.right;A=u||w?V(y,b):b}else{let b=o-m.top-m.bottom;p=u||w?V(d,b):b}if(w&&!u){let b=F(m.left,0),R=F(m.right,0),B=F(m.top,0),T=F(m.bottom,0);c?A=f-2*(b!==0||R!==0?b+R:F(m.left,m.right)):p=o-2*(B!==0||T!==0?B+T:F(m.top,m.bottom))}await r({...t,availableWidth:A,availableHeight:p});let h=await i.getDimensions(n.floating);return f!==h.width||o!==h.height?{reset:{rects:!0}}:{}}}};export{fe as arrow,me as autoPlacement,ae as computePosition,j as detectOverflow,de as flip,ue as hide,ge as inline,pe as limitShift,xe as offset,Ae as rectToClientRect,he as shift,we as size};
//# sourceMappingURL=core.mjs.map