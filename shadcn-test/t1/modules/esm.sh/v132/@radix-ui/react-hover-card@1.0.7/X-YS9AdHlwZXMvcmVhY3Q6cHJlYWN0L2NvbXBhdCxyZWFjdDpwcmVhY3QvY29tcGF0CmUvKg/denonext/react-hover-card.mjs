/* esm.sh - esbuild bundle(@radix-ui/react-hover-card@1.0.7) denonext production */
import m from"../../../../../../esm.sh/@babel/runtime@7.23.1/helpers/esm/extends.js";
import{useRef as C,useCallback as w,useEffect as h,createElement as s,forwardRef as P,useState as N}from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{composeEventHandlers as d}from"../../../../../../esm.sh/_@radix-ui/primitive@1.0.1.js";
import{createContextScope as A}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{useControllableState as M}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-controllable-state@1.0.1.js";
import{useComposedRefs as L}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{createPopperScope as H,Root as F,Anchor as k,Content as U,Arrow as j}from"../../../../../../esm.sh/v132/_@radix-ui/react-popper@1.1.3.js";
import{Portal as K}from"../../../../../../esm.sh/v132/_@radix-ui/react-portal@1.0.4.js";
import{Presence as I}from"../../../../../../esm.sh/v132/_@radix-ui/react-presence@1.0.1.js";
import{Primitive as B}from"../../../../../../esm.sh/v132/_@radix-ui/react-primitive@1.0.3.js";
import{DismissableLayer as G}from"../../../../../../esm.sh/v132/_@radix-ui/react-dismissable-layer@1.0.5.js";
var g,D="HoverCard",[T,ue]=A(D,[H]),x=H(),[V,O]=T(D),q=e=>{let{__scopeHoverCard:t,children:r,open:c,defaultOpen:n,onOpenChange:a,openDelay:$=700,closeDelay:u=300}=e,i=x(t),v=C(0),l=C(0),S=C(!1),p=C(!1),[R=!1,o]=M({prop:c,defaultProp:n,onChange:a}),f=w(()=>{clearTimeout(l.current),v.current=window.setTimeout(()=>o(!0),$)},[$,o]),E=w(()=>{clearTimeout(v.current),!S.current&&!p.current&&(l.current=window.setTimeout(()=>o(!1),u))},[u,o]),W=w(()=>o(!1),[o]);return h(()=>()=>{clearTimeout(v.current),clearTimeout(l.current)},[]),s(V,{scope:t,open:R,onOpenChange:o,onOpen:f,onClose:E,onDismiss:W,hasSelectionRef:S,isPointerDownOnContentRef:p},s(F,i,r))},z="HoverCardTrigger",J=P((e,t)=>{let{__scopeHoverCard:r,...c}=e,n=O(z,r),a=x(r);return s(k,m({asChild:!0},a),s(B.a,m({"data-state":n.open?"open":"closed"},c,{ref:t,onPointerEnter:d(e.onPointerEnter,b(n.onOpen)),onPointerLeave:d(e.onPointerLeave,b(n.onClose)),onFocus:d(e.onFocus,n.onOpen),onBlur:d(e.onBlur,n.onClose),onTouchStart:d(e.onTouchStart,$=>$.preventDefault())})))}),y="HoverCardPortal",[Q,X]=T(y,{forceMount:void 0}),Y=e=>{let{__scopeHoverCard:t,forceMount:r,children:c,container:n}=e,a=O(y,t);return s(Q,{scope:t,forceMount:r},s(I,{present:r||a.open},s(K,{asChild:!0,container:n},c)))},_="HoverCardContent",Z=P((e,t)=>{let r=X(_,e.__scopeHoverCard),{forceMount:c=r.forceMount,...n}=e,a=O(_,e.__scopeHoverCard);return s(I,{present:c||a.open},s(ee,m({"data-state":a.open?"open":"closed"},n,{onPointerEnter:d(e.onPointerEnter,b(a.onOpen)),onPointerLeave:d(e.onPointerLeave,b(a.onClose)),ref:t})))}),ee=P((e,t)=>{let{__scopeHoverCard:r,onEscapeKeyDown:c,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:$,...u}=e,i=O(_,r),v=x(r),l=C(null),S=L(t,l),[p,R]=N(!1);return h(()=>{if(p){let o=document.body;return g=o.style.userSelect||o.style.webkitUserSelect,o.style.userSelect="none",o.style.webkitUserSelect="none",()=>{o.style.userSelect=g,o.style.webkitUserSelect=g}}},[p]),h(()=>{if(l.current){let o=()=>{R(!1),i.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var f;((f=document.getSelection())===null||f===void 0?void 0:f.toString())!==""&&(i.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",o),()=>{document.removeEventListener("pointerup",o),i.hasSelectionRef.current=!1,i.isPointerDownOnContentRef.current=!1}}},[i.isPointerDownOnContentRef,i.hasSelectionRef]),h(()=>{l.current&&te(l.current).forEach(f=>f.setAttribute("tabindex","-1"))}),s(G,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:$,onEscapeKeyDown:c,onPointerDownOutside:n,onFocusOutside:d(a,o=>{o.preventDefault()}),onDismiss:i.onDismiss},s(U,m({},v,u,{onPointerDown:d(u.onPointerDown,o=>{o.currentTarget.contains(o.target)&&R(!0),i.hasSelectionRef.current=!1,i.isPointerDownOnContentRef.current=!0}),ref:S,style:{...u.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});var oe=P((e,t)=>{let{__scopeHoverCard:r,...c}=e,n=x(r);return s(j,m({},n,c,{ref:t}))});function b(e){return t=>t.pointerType==="touch"?void 0:e()}function te(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;r.nextNode();)t.push(r.currentNode);return t}var ve=q,Ce=J,me=Y,Se=Z,Re=oe;export{Re as Arrow,Se as Content,q as HoverCard,oe as HoverCardArrow,Z as HoverCardContent,Y as HoverCardPortal,J as HoverCardTrigger,me as Portal,ve as Root,Ce as Trigger,ue as createHoverCardScope};
//# sourceMappingURL=react-hover-card.mjs.map