/* esm.sh - esbuild bundle(@radix-ui/react-navigation-menu@1.1.4) denonext production */
import E from"../../../../../../esm.sh/@babel/runtime@7.23.1/helpers/esm/extends.js";
import{forwardRef as R,useState as D,useRef as x,useCallback as A,useEffect as Y,createElement as u,Fragment as Z,useMemo as be}from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import Me from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{createContextScope as Ne}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{composeEventHandlers as _}from"../../../../../../esm.sh/_@radix-ui/primitive@1.0.1.js";
import{Primitive as h,dispatchDiscreteCustomEvent as ee}from"../../../../../../esm.sh/v132/_@radix-ui/react-primitive@1.0.3.js";
import{useControllableState as ae}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-controllable-state@1.0.1.js";
import{useComposedRefs as k,composeRefs as Ce}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{useDirection as we}from"../../../../../../esm.sh/v132/_@radix-ui/react-direction@1.0.1.js";
import{Presence as z}from"../../../../../../esm.sh/v132/_@radix-ui/react-presence@1.0.1.js";
import{useId as re}from"../../../../../../esm.sh/v132/_@radix-ui/react-id@1.0.1.js";
import{createCollection as ie}from"../../../../../../esm.sh/v132/_@radix-ui/react-collection@1.0.3.js";
import{DismissableLayer as ye}from"../../../../../../esm.sh/v132/_@radix-ui/react-dismissable-layer@1.0.5.js";
import{usePrevious as Ee}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-previous@1.0.1.js";
import{useLayoutEffect as U}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-layout-effect@1.0.1.js";
import{useCallbackRef as L}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-callback-ref@1.0.1.js";
import{Root as _e}from"../../../../../../esm.sh/v132/_@radix-ui/react-visually-hidden@1.0.3.js";
var H="NavigationMenu",[q,se,Re]=ie(H),[j,xe,Ie]=ie(H),[X,$t]=Ne(H,[Re,Ie]),[Te,I]=X(H),[he,Pe]=X(H),De=R((e,t)=>{let{__scopeNavigationMenu:a,value:r,onValueChange:n,defaultValue:o,delayDuration:i=200,skipDelayDuration:f=300,orientation:s="horizontal",dir:b,...c}=e,[$,w]=D(null),M=k(t,g=>w(g)),m=we(b),p=x(0),N=x(0),y=x(0),[P,d]=D(!0),[v="",l]=ae({prop:r,onChange:g=>{let S=g!=="",G=f>0;S?(window.clearTimeout(y.current),G&&d(!1)):(window.clearTimeout(y.current),y.current=window.setTimeout(()=>d(!0),f)),n?.(g)},defaultProp:o}),C=A(()=>{window.clearTimeout(N.current),N.current=window.setTimeout(()=>l(""),150)},[l]),T=A(g=>{window.clearTimeout(N.current),l(g)},[l]),O=A(g=>{v===g?window.clearTimeout(N.current):p.current=window.setTimeout(()=>{window.clearTimeout(N.current),l(g)},i)},[v,l,i]);return Y(()=>()=>{window.clearTimeout(p.current),window.clearTimeout(N.current),window.clearTimeout(y.current)},[]),u(ce,{scope:a,isRootMenu:!0,value:v,dir:m,orientation:s,rootNavigationMenu:$,onTriggerEnter:g=>{window.clearTimeout(p.current),P?O(g):T(g)},onTriggerLeave:()=>{window.clearTimeout(p.current),C()},onContentEnter:()=>window.clearTimeout(N.current),onContentLeave:C,onItemSelect:g=>{l(S=>S===g?"":g)},onItemDismiss:()=>l("")},u(h.nav,E({"aria-label":"Main","data-orientation":s,dir:m},c,{ref:M})))}),Oe="NavigationMenuSub",Se=R((e,t)=>{let{__scopeNavigationMenu:a,value:r,onValueChange:n,defaultValue:o,orientation:i="horizontal",...f}=e,s=I(Oe,a),[b="",c]=ae({prop:r,onChange:n,defaultProp:o});return u(ce,{scope:a,isRootMenu:!1,value:b,dir:s.dir,orientation:i,rootNavigationMenu:s.rootNavigationMenu,onTriggerEnter:$=>c($),onItemSelect:$=>c($),onItemDismiss:()=>c("")},u(h.div,E({"data-orientation":i},f,{ref:t})))}),ce=e=>{let{scope:t,isRootMenu:a,rootNavigationMenu:r,dir:n,orientation:o,children:i,value:f,onItemSelect:s,onItemDismiss:b,onTriggerEnter:c,onTriggerLeave:$,onContentEnter:w,onContentLeave:M}=e,[m,p]=D(null),[N,y]=D(new Map),[P,d]=D(null);return u(Te,{scope:t,isRootMenu:a,rootNavigationMenu:r,value:f,previousValue:Ee(f),baseId:re(),dir:n,orientation:o,viewport:m,onViewportChange:p,indicatorTrack:P,onIndicatorTrackChange:d,onTriggerEnter:L(c),onTriggerLeave:L($),onContentEnter:L(w),onContentLeave:L(M),onItemSelect:L(s),onItemDismiss:L(b),onViewportContentChange:A((v,l)=>{y(C=>(C.set(v,l),new Map(C)))},[]),onViewportContentRemove:A(v=>{y(l=>l.has(v)?(l.delete(v),new Map(l)):l)},[])},u(q.Provider,{scope:t},u(he,{scope:t,items:N},i)))},Le="NavigationMenuList",Ae=R((e,t)=>{let{__scopeNavigationMenu:a,...r}=e,n=I(Le,a),o=u(h.ul,E({"data-orientation":n.orientation},r,{ref:t}));return u(h.div,{style:{position:"relative"},ref:n.onIndicatorTrackChange},u(q.Slot,{scope:a},n.isRootMenu?u(ve,{asChild:!0},o):o))}),Fe="NavigationMenuItem",[ke,ue]=X(Fe),He=R((e,t)=>{let{__scopeNavigationMenu:a,value:r,...n}=e,o=re(),i=r||o||"LEGACY_REACT_AUTO_VALUE",f=x(null),s=x(null),b=x(null),c=x(()=>{}),$=x(!1),w=A((m="start")=>{if(f.current){c.current();let p=B(f.current);p.length&&J(m==="start"?p:p.reverse())}},[]),M=A(()=>{if(f.current){let m=B(f.current);m.length&&(c.current=Xe(m))}},[]);return u(ke,{scope:a,value:i,triggerRef:s,contentRef:f,focusProxyRef:b,wasEscapeCloseRef:$,onEntryKeyDown:w,onFocusProxyEnter:w,onRootContentClose:M,onContentFocusOutside:M},u(h.li,E({},n,{ref:t})))}),te="NavigationMenuTrigger",Ve=R((e,t)=>{let{__scopeNavigationMenu:a,disabled:r,...n}=e,o=I(te,e.__scopeNavigationMenu),i=ue(te,e.__scopeNavigationMenu),f=x(null),s=k(f,i.triggerRef,t),b=ge(o.baseId,i.value),c=pe(o.baseId,i.value),$=x(!1),w=x(!1),M=i.value===o.value;return u(Z,null,u(q.ItemSlot,{scope:a,value:i.value},u($e,{asChild:!0},u(h.button,E({id:b,disabled:r,"data-disabled":r?"":void 0,"data-state":Q(M),"aria-expanded":M,"aria-controls":c},n,{ref:s,onPointerEnter:_(e.onPointerEnter,()=>{w.current=!1,i.wasEscapeCloseRef.current=!1}),onPointerMove:_(e.onPointerMove,K(()=>{r||w.current||i.wasEscapeCloseRef.current||$.current||(o.onTriggerEnter(i.value),$.current=!0)})),onPointerLeave:_(e.onPointerLeave,K(()=>{r||(o.onTriggerLeave(),$.current=!1)})),onClick:_(e.onClick,()=>{o.onItemSelect(i.value),w.current=M}),onKeyDown:_(e.onKeyDown,m=>{let N={horizontal:"ArrowDown",vertical:o.dir==="rtl"?"ArrowLeft":"ArrowRight"}[o.orientation];M&&m.key===N&&(i.onEntryKeyDown(),m.preventDefault())})})))),M&&u(Z,null,u(_e,{"aria-hidden":!0,tabIndex:0,ref:i.focusProxyRef,onFocus:m=>{let p=i.contentRef.current,N=m.relatedTarget,y=N===f.current,P=p?.contains(N);(y||!P)&&i.onFocusProxyEnter(y?"start":"end")}}),o.viewport&&u("span",{"aria-owns":c})))});var ne="navigationMenu.linkSelect",Ke=R((e,t)=>{let{__scopeNavigationMenu:a,active:r,onSelect:n,...o}=e;return u($e,{asChild:!0},u(h.a,E({"data-active":r?"":void 0,"aria-current":r?"page":void 0},o,{ref:t,onClick:_(e.onClick,i=>{let f=i.target,s=new CustomEvent(ne,{bubbles:!0,cancelable:!0});if(f.addEventListener(ne,b=>n?.(b),{once:!0}),ee(f,s),!s.defaultPrevented&&!i.metaKey){let b=new CustomEvent(V,{bubbles:!0,cancelable:!0});ee(f,b)}},{checkForDefaultPrevented:!1})})))}),le="NavigationMenuIndicator",ze=R((e,t)=>{let{forceMount:a,...r}=e,n=I(le,e.__scopeNavigationMenu),o=!!n.value;return n.indicatorTrack?Me.createPortal(u(z,{present:a||o},u(Ge,E({},r,{ref:t}))),n.indicatorTrack):null}),Ge=R((e,t)=>{let{__scopeNavigationMenu:a,...r}=e,n=I(le,a),o=se(a),[i,f]=D(null),[s,b]=D(null),c=n.orientation==="horizontal",$=!!n.value;Y(()=>{var M;let p=(M=o().find(N=>N.value===n.value))===null||M===void 0?void 0:M.ref.current;p&&f(p)},[o,n.value]);let w=()=>{i&&b({size:c?i.offsetWidth:i.offsetHeight,offset:c?i.offsetLeft:i.offsetTop})};return W(i,w),W(n.indicatorTrack,w),s?u(h.div,E({"aria-hidden":!0,"data-state":$?"visible":"hidden","data-orientation":n.orientation},r,{ref:t,style:{position:"absolute",...c?{left:0,width:s.size+"px",transform:`translateX(${s.offset}px)`}:{top:0,height:s.size+"px",transform:`translateY(${s.offset}px)`},...r.style}})):null}),F="NavigationMenuContent",Ue=R((e,t)=>{let{forceMount:a,...r}=e,n=I(F,e.__scopeNavigationMenu),o=ue(F,e.__scopeNavigationMenu),i=k(o.contentRef,t),f=o.value===n.value,s={value:o.value,triggerRef:o.triggerRef,focusProxyRef:o.focusProxyRef,wasEscapeCloseRef:o.wasEscapeCloseRef,onContentFocusOutside:o.onContentFocusOutside,onRootContentClose:o.onRootContentClose,...r};return n.viewport?u(je,E({forceMount:a},s,{ref:i})):u(z,{present:a||f},u(fe,E({"data-state":Q(f)},s,{ref:i,onPointerEnter:_(e.onPointerEnter,n.onContentEnter),onPointerLeave:_(e.onPointerLeave,K(n.onContentLeave)),style:{pointerEvents:!f&&n.isRootMenu?"none":void 0,...s.style}})))}),je=R((e,t)=>{let a=I(F,e.__scopeNavigationMenu),{onViewportContentChange:r,onViewportContentRemove:n}=a;return U(()=>{r(e.value,{ref:t,...e})},[e,t,r]),U(()=>()=>n(e.value),[e.value,n]),null}),V="navigationMenu.rootContentDismiss",fe=R((e,t)=>{let{__scopeNavigationMenu:a,value:r,triggerRef:n,focusProxyRef:o,wasEscapeCloseRef:i,onRootContentClose:f,onContentFocusOutside:s,...b}=e,c=I(F,a),$=x(null),w=k($,t),M=ge(c.baseId,r),m=pe(c.baseId,r),p=se(a),N=x(null),{onItemDismiss:y}=c;Y(()=>{let d=$.current;if(c.isRootMenu&&d){let v=()=>{var l;y(),f(),d.contains(document.activeElement)&&((l=n.current)===null||l===void 0||l.focus())};return d.addEventListener(V,v),()=>d.removeEventListener(V,v)}},[c.isRootMenu,e.value,n,y,f]);let P=be(()=>{let v=p().map(S=>S.value);c.dir==="rtl"&&v.reverse();let l=v.indexOf(c.value),C=v.indexOf(c.previousValue),T=r===c.value,O=C===v.indexOf(r);if(!T&&!O)return N.current;let g=(()=>{if(l!==C){if(T&&C!==-1)return l>C?"from-end":"from-start";if(O&&l!==-1)return l>C?"to-start":"to-end"}return null})();return N.current=g,g},[c.previousValue,c.value,c.dir,p,r]);return u(ve,{asChild:!0},u(ye,E({id:m,"aria-labelledby":M,"data-motion":P,"data-orientation":c.orientation},b,{ref:w,onDismiss:()=>{var d;let v=new Event(V,{bubbles:!0,cancelable:!0});(d=$.current)===null||d===void 0||d.dispatchEvent(v)},onFocusOutside:_(e.onFocusOutside,d=>{var v;s();let l=d.target;(v=c.rootNavigationMenu)!==null&&v!==void 0&&v.contains(l)&&d.preventDefault()}),onPointerDownOutside:_(e.onPointerDownOutside,d=>{var v;let l=d.target,C=p().some(O=>{var g;return(g=O.ref.current)===null||g===void 0?void 0:g.contains(l)}),T=c.isRootMenu&&((v=c.viewport)===null||v===void 0?void 0:v.contains(l));(C||T||!c.isRootMenu)&&d.preventDefault()}),onKeyDown:_(e.onKeyDown,d=>{let v=d.altKey||d.ctrlKey||d.metaKey;if(d.key==="Tab"&&!v){let T=B(d.currentTarget),O=document.activeElement,g=T.findIndex(me=>me===O),G=d.shiftKey?T.slice(0,g).reverse():T.slice(g+1,T.length);if(J(G))d.preventDefault();else{var C;(C=o.current)===null||C===void 0||C.focus()}}}),onEscapeKeyDown:_(e.onEscapeKeyDown,d=>{i.current=!0})})))}),de="NavigationMenuViewport",Be=R((e,t)=>{let{forceMount:a,...r}=e,o=!!I(de,e.__scopeNavigationMenu).value;return u(z,{present:a||o},u(We,E({},r,{ref:t})))}),We=R((e,t)=>{let{__scopeNavigationMenu:a,children:r,...n}=e,o=I(de,a),i=k(t,o.onViewportChange),f=Pe(F,e.__scopeNavigationMenu),[s,b]=D(null),[c,$]=D(null),w=s?s?.width+"px":void 0,M=s?s?.height+"px":void 0,m=!!o.value,p=m?o.value:o.previousValue;return W(c,()=>{c&&b({width:c.offsetWidth,height:c.offsetHeight})}),u(h.div,E({"data-state":Q(m),"data-orientation":o.orientation},n,{ref:i,style:{pointerEvents:!m&&o.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":w,"--radix-navigation-menu-viewport-height":M,...n.style},onPointerEnter:_(e.onPointerEnter,o.onContentEnter),onPointerLeave:_(e.onPointerLeave,K(o.onContentLeave))}),Array.from(f.items).map(([y,{ref:P,forceMount:d,...v}])=>{let l=p===y;return u(z,{key:y,present:d||l},u(fe,E({},v,{ref:Ce(P,C=>{l&&C&&$(C)})})))}))}),Ye="FocusGroup",ve=R((e,t)=>{let{__scopeNavigationMenu:a,...r}=e,n=I(Ye,a);return u(j.Provider,{scope:a},u(j.Slot,{scope:a},u(h.div,E({dir:n.dir},r,{ref:t}))))}),oe=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],qe="FocusGroupItem",$e=R((e,t)=>{let{__scopeNavigationMenu:a,...r}=e,n=xe(a),o=I(qe,a);return u(j.ItemSlot,{scope:a},u(h.button,E({},r,{ref:t,onKeyDown:_(e.onKeyDown,i=>{if(["Home","End",...oe].includes(i.key)){let s=n().map($=>$.ref.current);if([o.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(i.key)&&s.reverse(),oe.includes(i.key)){let $=s.indexOf(i.currentTarget);s=s.slice($+1)}setTimeout(()=>J(s)),i.preventDefault()}})})))});function B(e){let t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{let n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function J(e){let t=document.activeElement;return e.some(a=>a===t?!0:(a.focus(),document.activeElement!==t))}function Xe(e){return e.forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")}),()=>{e.forEach(t=>{let a=t.dataset.tabindex;t.setAttribute("tabindex",a)})}}function W(e,t){let a=L(t);U(()=>{let r=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(a)});return n.observe(e),()=>{window.cancelAnimationFrame(r),n.unobserve(e)}}},[e,a])}function Q(e){return e?"open":"closed"}function ge(e,t){return`${e}-trigger-${t}`}function pe(e,t){return`${e}-content-${t}`}function K(e){return t=>t.pointerType==="mouse"?e(t):void 0}var gt=De,pt=Se,mt=Ae,bt=He,Mt=Ve,Nt=Ke,Ct=ze,wt=Ue,yt=Be;export{wt as Content,Ct as Indicator,bt as Item,Nt as Link,mt as List,De as NavigationMenu,Ue as NavigationMenuContent,ze as NavigationMenuIndicator,He as NavigationMenuItem,Ke as NavigationMenuLink,Ae as NavigationMenuList,Se as NavigationMenuSub,Ve as NavigationMenuTrigger,Be as NavigationMenuViewport,gt as Root,pt as Sub,Mt as Trigger,yt as Viewport,$t as createNavigationMenuScope};
//# sourceMappingURL=react-navigation-menu.mjs.map