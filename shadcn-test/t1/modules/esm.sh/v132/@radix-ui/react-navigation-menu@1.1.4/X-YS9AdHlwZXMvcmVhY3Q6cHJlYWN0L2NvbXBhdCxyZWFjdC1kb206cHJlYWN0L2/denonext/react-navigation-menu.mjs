/* esm.sh - esbuild bundle(@radix-ui/react-navigation-menu@1.1.4) denonext production */
/* this file is created from "./NavigationMenu.tsx" */
import*as e from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import ye from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{createContextScope as Te}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{composeEventHandlers as N}from"../../../../../../esm.sh/_@radix-ui/primitive@1.0.1.js";
import{Primitive as h,dispatchDiscreteCustomEvent as ie}from"../../../../../../esm.sh/v132/_@radix-ui/react-primitive@1.0.3.js";
import{useControllableState as ae}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-controllable-state@1.0.1.js";
import{composeRefs as Ie,useComposedRefs as O}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{useDirection as he}from"../../../../../../esm.sh/v132/_@radix-ui/react-direction@1.0.1.js";
import{Presence as F}from"../../../../../../esm.sh/v132/_@radix-ui/react-presence@1.0.1.js";
import{useId as se}from"../../../../../../esm.sh/v132/_@radix-ui/react-id@1.0.1.js";
import{createCollection as ce}from"../../../../../../esm.sh/v132/_@radix-ui/react-collection@1.0.3.js";
import{DismissableLayer as be}from"../../../../../../esm.sh/v132/_@radix-ui/react-dismissable-layer@1.0.5.js";
import{usePrevious as Pe}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-previous@1.0.1.js";
import{useLayoutEffect as V}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-layout-effect@1.0.1.js";
import{useCallbackRef as S}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-callback-ref@1.0.1.js";
import*as _e from"../../../../../../esm.sh/v132/_@radix-ui/react-visually-hidden@1.0.3.js";
const D="NavigationMenu",[z,ue,xe]=ce(D),[G,Se,De]=ce(D),[U,ke]=Te(D,[xe,De]),[Ae,I]=U(D),[Oe,Fe]=U(D),H=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,onValueChange:r,defaultValue:o,delayDuration:s=200,skipDelayDuration:f=300,orientation:u="horizontal",dir:E,...m}=t,[c,g]=e.useState(null),R=O(n,p=>g(p)),v=he(E),w=e.useRef(0),C=e.useRef(0),M=e.useRef(0),[b,P]=e.useState(!0),[l="",d]=ae({prop:a,onChange:p=>{const x=p!=="",A=f>0;x?(window.clearTimeout(M.current),A&&P(!1)):(window.clearTimeout(M.current),M.current=window.setTimeout(()=>P(!0),f)),r?.(p)},defaultProp:o}),T=e.useCallback(()=>{window.clearTimeout(C.current),C.current=window.setTimeout(()=>d(""),150)},[d]),y=e.useCallback(p=>{window.clearTimeout(C.current),d(p)},[d]),_=e.useCallback(p=>{l===p?window.clearTimeout(C.current):w.current=window.setTimeout(()=>{window.clearTimeout(C.current),d(p)},s)},[l,d,s]);return e.useEffect(()=>()=>{window.clearTimeout(w.current),window.clearTimeout(C.current),window.clearTimeout(M.current)},[]),e.createElement(de,{scope:i,isRootMenu:!0,value:l,dir:v,orientation:u,rootNavigationMenu:c,onTriggerEnter:p=>{window.clearTimeout(w.current),b?_(p):y(p)},onTriggerLeave:()=>{window.clearTimeout(w.current),T()},onContentEnter:()=>window.clearTimeout(C.current),onContentLeave:T,onItemSelect:p=>{d(x=>x===p?"":p)},onItemDismiss:()=>d("")},e.createElement(h.nav,{"aria-label":"Main","data-orientation":u,dir:v,...m,ref:R}))});H.displayName=D;const le="NavigationMenuSub",B=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,onValueChange:r,defaultValue:o,orientation:s="horizontal",...f}=t,u=I(le,i),[E="",m]=ae({prop:a,onChange:r,defaultProp:o});return e.createElement(de,{scope:i,isRootMenu:!1,value:E,dir:u.dir,orientation:s,rootNavigationMenu:u.rootNavigationMenu,onTriggerEnter:c=>m(c),onItemSelect:c=>m(c),onItemDismiss:()=>m("")},e.createElement(h.div,{"data-orientation":s,...f,ref:n}))});B.displayName=le;const de=t=>{const{scope:n,isRootMenu:i,rootNavigationMenu:a,dir:r,orientation:o,children:s,value:f,onItemSelect:u,onItemDismiss:E,onTriggerEnter:m,onTriggerLeave:c,onContentEnter:g,onContentLeave:R}=t,[v,w]=e.useState(null),[C,M]=e.useState(new Map),[b,P]=e.useState(null);return e.createElement(Ae,{scope:n,isRootMenu:i,rootNavigationMenu:a,value:f,previousValue:Pe(f),baseId:se(),dir:r,orientation:o,viewport:v,onViewportChange:w,indicatorTrack:b,onIndicatorTrackChange:P,onTriggerEnter:S(m),onTriggerLeave:S(c),onContentEnter:S(g),onContentLeave:S(R),onItemSelect:S(u),onItemDismiss:S(E),onViewportContentChange:e.useCallback((l,d)=>{M(T=>(T.set(l,d),new Map(T)))},[]),onViewportContentRemove:e.useCallback(l=>{M(d=>d.has(l)?(d.delete(l),new Map(d)):d)},[])},e.createElement(z.Provider,{scope:n},e.createElement(Oe,{scope:n,items:C},s)))},fe="NavigationMenuList",W=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,r=I(fe,i),o=e.createElement(h.ul,{"data-orientation":r.orientation,...a,ref:n});return e.createElement(h.div,{style:{position:"relative"},ref:r.onIndicatorTrackChange},e.createElement(z.Slot,{scope:i},r.isRootMenu?e.createElement(Ee,{asChild:!0},o):o))});W.displayName=fe;const me="NavigationMenuItem",[Le,ve]=U(me),$=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,...r}=t,o=se(),s=a||o||"LEGACY_REACT_AUTO_VALUE",f=e.useRef(null),u=e.useRef(null),E=e.useRef(null),m=e.useRef(()=>{}),c=e.useRef(!1),g=e.useCallback((v="start")=>{if(f.current){m.current();const w=te(f.current);w.length&&ne(v==="start"?w:w.reverse())}},[]),R=e.useCallback(()=>{if(f.current){const v=te(f.current);v.length&&(m.current=Be(v))}},[]);return e.createElement(Le,{scope:i,value:s,triggerRef:u,contentRef:f,focusProxyRef:E,wasEscapeCloseRef:c,onEntryKeyDown:g,onFocusProxyEnter:g,onRootContentClose:R,onContentFocusOutside:R},e.createElement(h.li,{...r,ref:n}))});$.displayName=me;const Y="NavigationMenuTrigger",q=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,disabled:a,...r}=t,o=I(Y,t.__scopeNavigationMenu),s=ve(Y,t.__scopeNavigationMenu),f=e.useRef(null),u=O(f,s.triggerRef,n),E=Re(o.baseId,s.value),m=Me(o.baseId,s.value),c=e.useRef(!1),g=e.useRef(!1),R=s.value===o.value;return e.createElement(e.Fragment,null,e.createElement(z.ItemSlot,{scope:i,value:s.value},e.createElement(Ce,{asChild:!0},e.createElement(h.button,{id:E,disabled:a,"data-disabled":a?"":void 0,"data-state":re(R),"aria-expanded":R,"aria-controls":m,...r,ref:u,onPointerEnter:N(t.onPointerEnter,()=>{g.current=!1,s.wasEscapeCloseRef.current=!1}),onPointerMove:N(t.onPointerMove,K(()=>{a||g.current||s.wasEscapeCloseRef.current||c.current||(o.onTriggerEnter(s.value),c.current=!0)})),onPointerLeave:N(t.onPointerLeave,K(()=>{a||(o.onTriggerLeave(),c.current=!1)})),onClick:N(t.onClick,()=>{o.onItemSelect(s.value),g.current=R}),onKeyDown:N(t.onKeyDown,v=>{const C={horizontal:"ArrowDown",vertical:o.dir==="rtl"?"ArrowLeft":"ArrowRight"}[o.orientation];R&&v.key===C&&(s.onEntryKeyDown(),v.preventDefault())})}))),R&&e.createElement(e.Fragment,null,e.createElement(_e.Root,{"aria-hidden":!0,tabIndex:0,ref:s.focusProxyRef,onFocus:v=>{const w=s.contentRef.current,C=v.relatedTarget,M=C===f.current,b=w?.contains(C);(M||!b)&&s.onFocusProxyEnter(M?"start":"end")}}),o.viewport&&e.createElement("span",{"aria-owns":m})))});q.displayName=Y;const Ke="NavigationMenuLink",ge="navigationMenu.linkSelect",X=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,active:a,onSelect:r,...o}=t;return e.createElement(Ce,{asChild:!0},e.createElement(h.a,{"data-active":a?"":void 0,"aria-current":a?"page":void 0,...o,ref:n,onClick:N(t.onClick,s=>{const f=s.target,u=new CustomEvent(ge,{bubbles:!0,cancelable:!0});if(f.addEventListener(ge,E=>r?.(E),{once:!0}),ie(f,u),!u.defaultPrevented&&!s.metaKey){const E=new CustomEvent(L,{bubbles:!0,cancelable:!0});ie(f,E)}},{checkForDefaultPrevented:!1})}))});X.displayName=Ke;const j="NavigationMenuIndicator",J=e.forwardRef((t,n)=>{const{forceMount:i,...a}=t,r=I(j,t.__scopeNavigationMenu),o=!!r.value;return r.indicatorTrack?ye.createPortal(e.createElement(F,{present:i||o},e.createElement(Ve,{...a,ref:n})),r.indicatorTrack):null});J.displayName=j;const Ve=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,r=I(j,i),o=ue(i),[s,f]=e.useState(null),[u,E]=e.useState(null),m=r.orientation==="horizontal",c=!!r.value;e.useEffect(()=>{const v=o().find(w=>w.value===r.value)?.ref.current;v&&f(v)},[o,r.value]);const g=()=>{s&&E({size:m?s.offsetWidth:s.offsetHeight,offset:m?s.offsetLeft:s.offsetTop})};return oe(s,g),oe(r.indicatorTrack,g),u?e.createElement(h.div,{"aria-hidden":!0,"data-state":c?"visible":"hidden","data-orientation":r.orientation,...a,ref:n,style:{position:"absolute",...m?{left:0,width:u.size+"px",transform:`translateX(${u.offset}px)`}:{top:0,height:u.size+"px",transform:`translateY(${u.offset}px)`},...a.style}}):null}),k="NavigationMenuContent",Q=e.forwardRef((t,n)=>{const{forceMount:i,...a}=t,r=I(k,t.__scopeNavigationMenu),o=ve(k,t.__scopeNavigationMenu),s=O(o.contentRef,n),f=o.value===r.value,u={value:o.value,triggerRef:o.triggerRef,focusProxyRef:o.focusProxyRef,wasEscapeCloseRef:o.wasEscapeCloseRef,onContentFocusOutside:o.onContentFocusOutside,onRootContentClose:o.onRootContentClose,...a};return r.viewport?e.createElement(ze,{forceMount:i,...u,ref:s}):e.createElement(F,{present:i||f},e.createElement(pe,{"data-state":re(f),...u,ref:s,onPointerEnter:N(t.onPointerEnter,r.onContentEnter),onPointerLeave:N(t.onPointerLeave,K(r.onContentLeave)),style:{pointerEvents:!f&&r.isRootMenu?"none":void 0,...u.style}}))});Q.displayName=k;const ze=e.forwardRef((t,n)=>{const i=I(k,t.__scopeNavigationMenu),{onViewportContentChange:a,onViewportContentRemove:r}=i;return V(()=>{a(t.value,{ref:n,...t})},[t,n,a]),V(()=>()=>r(t.value),[t.value,r]),null}),L="navigationMenu.rootContentDismiss",pe=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,setter:r,triggerRef:o,focusProxyRef:s,wasEscapeCloseRef:f,onRootContentClose:u,onContentFocusOutside:E,...m}=t,c=I(k,i),g=e.useRef(null),R=O(g,n),v=Re(c.baseId,a),w=Me(c.baseId,a),C=ue(i),M=e.useRef(null),{onItemDismiss:b}=c;e.useEffect(()=>{g.current&&typeof r=="function"&&r(g.current)},[g.current]),e.useEffect(()=>{const l=g.current;if(c.isRootMenu&&l){const d=()=>{b(),u(),l.contains(document.activeElement)&&o.current?.focus()};return l.addEventListener(L,d),()=>l.removeEventListener(L,d)}},[c.isRootMenu,t.value,o,b,u]);const P=e.useMemo(()=>{const d=C().map(A=>A.value);c.dir==="rtl"&&d.reverse();const T=d.indexOf(c.value),y=d.indexOf(c.previousValue),_=a===c.value,p=y===d.indexOf(a);if(!_&&!p)return M.current;const x=(()=>{if(T!==y){if(_&&y!==-1)return T>y?"from-end":"from-start";if(p&&T!==-1)return T>y?"to-start":"to-end"}return null})();return M.current=x,x},[c.previousValue,c.value,c.dir,C,a]);return e.createElement(Ee,{asChild:!0},e.createElement(be,{id:w,"aria-labelledby":v,"data-motion":P,"data-orientation":c.orientation,...m,ref:R,disableOutsidePointerEvents:!1,onDismiss:()=>{const l=new Event(L,{bubbles:!0,cancelable:!0});g.current?.dispatchEvent(l)},onFocusOutside:N(t.onFocusOutside,l=>{E();const d=l.target;c.rootNavigationMenu?.contains(d)&&l.preventDefault()}),onPointerDownOutside:N(t.onPointerDownOutside,l=>{const d=l.target,T=C().some(_=>_.ref.current?.contains(d)),y=c.isRootMenu&&c.viewport?.contains(d);(T||y||!c.isRootMenu)&&l.preventDefault()}),onKeyDown:N(t.onKeyDown,l=>{const d=l.altKey||l.ctrlKey||l.metaKey;if(l.key==="Tab"&&!d){const y=te(l.currentTarget),_=document.activeElement,p=y.findIndex(Ne=>Ne===_),A=l.shiftKey?y.slice(0,p).reverse():y.slice(p+1,y.length);ne(A)?l.preventDefault():s.current?.focus()}}),onEscapeKeyDown:N(t.onEscapeKeyDown,l=>{f.current=!0})}))}),Z="NavigationMenuViewport",ee=e.forwardRef((t,n)=>{const{forceMount:i,...a}=t,o=!!I(Z,t.__scopeNavigationMenu).value;return e.createElement(F,{present:i||o},e.createElement(Ge,{...a,ref:n}))});ee.displayName=Z;const Ge=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,children:a,...r}=t,o=I(Z,i),s=O(n,o.onViewportChange),f=Fe(k,t.__scopeNavigationMenu),[u,E]=e.useState(null),[m,c]=e.useState(null),g=u?u?.width+"px":void 0,R=u?u?.height+"px":void 0,v=!!o.value,w=v?o.value:o.previousValue;return oe(m,()=>{m&&E({width:m.offsetWidth,height:m.offsetHeight})}),e.createElement(h.div,{"data-state":re(v),"data-orientation":o.orientation,...r,ref:s,style:{pointerEvents:!v&&o.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":g,"--radix-navigation-menu-viewport-height":R,...r.style},onPointerEnter:N(t.onPointerEnter,o.onContentEnter),onPointerLeave:N(t.onPointerLeave,K(o.onContentLeave))},Array.from(f.items).map(([M,{ref:b,forceMount:P,...l}])=>{const d=w===M;return e.createElement(F,{key:M,present:P||d},e.createElement(pe,{setter:c,...l,ref:Ie}))}))}),Ue="FocusGroup",Ee=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,r=I(Ue,i);return e.createElement(G.Provider,{scope:i},e.createElement(G.Slot,{scope:i},e.createElement(h.div,{dir:r.dir,...a,ref:n})))}),we=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],He="FocusGroupItem",Ce=e.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,r=Se(i),o=I(He,i);return e.createElement(G.ItemSlot,{scope:i},e.createElement(h.button,{...a,ref:n,onKeyDown:N(t.onKeyDown,s=>{if(["Home","End",...we].includes(s.key)){let u=r().map(c=>c.ref.current);if([o.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(s.key)&&u.reverse(),we.includes(s.key)){const c=u.indexOf(s.currentTarget);u=u.slice(c+1)}setTimeout(()=>ne(u)),s.preventDefault()}})}))});function te(t){const n=[],i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const r=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||r?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function ne(t){const n=document.activeElement;return t.some(i=>i===n?!0:(i.focus(),document.activeElement!==n))}function Be(t){return t.forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")}),()=>{t.forEach(n=>{const i=n.dataset.tabindex;n.setAttribute("tabindex",i)})}}function oe(t,n){const i=S(n);V(()=>{let a=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(i)});return r.observe(t),()=>{window.cancelAnimationFrame(a),r.unobserve(t)}}},[t,i])}function re(t){return t?"open":"closed"}function Re(t,n){return`${t}-trigger-${n}`}function Me(t,n){return`${t}-content-${n}`}function K(t){return n=>n.pointerType==="mouse"?t(n):void 0}const We=H,$e=B,Ye=W,qe=$,Xe=q,je=X,Je=J,Qe=Q,Ze=ee;export{ke as createNavigationMenuScope,H as NavigationMenu,B as NavigationMenuSub,W as NavigationMenuList,$ as NavigationMenuItem,q as NavigationMenuTrigger,X as NavigationMenuLink,J as NavigationMenuIndicator,Q as NavigationMenuContent,ee as NavigationMenuViewport,We as Root,$e as Sub,Ye as List,qe as Item,Xe as Trigger,je as Link,Je as Indicator,Qe as Content,Ze as Viewport};
