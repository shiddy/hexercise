/* esm.sh - esbuild bundle(@radix-ui/react-collection@1.0.3) denonext production */
import t from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{createContextScope as O}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{useComposedRefs as S}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{Slot as x}from"../../../../../../esm.sh/v132/_@radix-ui/react-slot@1.0.2.js";
function _(s){let a=s+"CollectionProvider",[I,$]=O(a),[E,f]=I(a,{collectionRef:{current:null},itemMap:new Map}),m=r=>{let{scope:e,children:l}=r,o=t.useRef(null),c=t.useRef(new Map).current;return t.createElement(E,{scope:e,itemMap:c,collectionRef:o},l)},d=s+"CollectionSlot",p=t.forwardRef((r,e)=>{let{scope:l,children:o}=r,c=f(d,l),n=S(e,c.collectionRef);return t.createElement(x,{ref:n},o)}),u=s+"CollectionItemSlot",C="data-radix-collection-item",R=t.forwardRef((r,e)=>{let{scope:l,children:o,...c}=r,n=t.useRef(null),M=S(e,n),i=f(u,l);return t.useEffect(()=>(i.itemMap.set(n,{ref:n,...c}),()=>void i.itemMap.delete(n))),t.createElement(x,{[C]:"",ref:M},o)});function h(r){let e=f(s+"CollectionConsumer",r);return t.useCallback(()=>{let o=e.collectionRef.current;if(!o)return[];let c=Array.from(o.querySelectorAll(`[${C}]`));return Array.from(e.itemMap.values()).sort((i,v)=>c.indexOf(i.ref.current)-c.indexOf(v.ref.current))},[e.collectionRef,e.itemMap])}return[{Provider:m,Slot:p,ItemSlot:R},h,$]}export{_ as createCollection};
//# sourceMappingURL=react-collection.mjs.map