/* esm.sh - esbuild bundle(@radix-ui/react-menu@2.0.6) denonext production */
import g from"../../../../../../esm.sh/@babel/runtime@7.23.1/helpers/esm/extends.js";
import{useState as D,useRef as h,useEffect as R,createElement as s,useCallback as I,forwardRef as _,Fragment as Ge}from"../../../../../../esm.sh/preact@10.19.6/compat.js";
import{composeEventHandlers as v}from"../../../../../../esm.sh/_@radix-ui/primitive@1.0.1.js";
import{createCollection as Ke}from"../../../../../../esm.sh/v132/_@radix-ui/react-collection@1.0.3.js";
import{useComposedRefs as G,composeRefs as je}from"../../../../../../esm.sh/v132/_@radix-ui/react-compose-refs@1.0.1.js";
import{createContextScope as Ue}from"../../../../../../esm.sh/v132/_@radix-ui/react-context@1.0.1.js";
import{useDirection as Ve}from"../../../../../../esm.sh/v132/_@radix-ui/react-direction@1.0.1.js";
import{DismissableLayer as Be}from"../../../../../../esm.sh/v132/_@radix-ui/react-dismissable-layer@1.0.5.js";
import{useFocusGuards as Ye}from"../../../../../../esm.sh/v132/_@radix-ui/react-focus-guards@1.0.1.js";
import{FocusScope as Xe}from"../../../../../../esm.sh/v132/_@radix-ui/react-focus-scope@1.0.4.js";
import{useId as me}from"../../../../../../esm.sh/v132/_@radix-ui/react-id@1.0.1.js";
import{createPopperScope as ve,Root as ge,Anchor as He,Content as We,Arrow as ze}from"../../../../../../esm.sh/v132/_@radix-ui/react-popper@1.1.3.js";
import{Portal as Ze}from"../../../../../../esm.sh/v132/_@radix-ui/react-portal@1.0.4.js";
import{Presence as q}from"../../../../../../esm.sh/v132/_@radix-ui/react-presence@1.0.1.js";
import{Primitive as K,dispatchDiscreteCustomEvent as qe}from"../../../../../../esm.sh/v132/_@radix-ui/react-primitive@1.0.3.js";
import{createRovingFocusGroupScope as Ce,Root as Je,Item as Qe}from"../../../../../../esm.sh/v132/_@radix-ui/react-roving-focus@1.0.4.js";
import{Slot as en}from"../../../../../../esm.sh/v132/_@radix-ui/react-slot@1.0.2.js";
import{useCallbackRef as ce}from"../../../../../../esm.sh/v132/_@radix-ui/react-use-callback-ref@1.0.1.js";
import{hideOthers as nn}from"../../../../../../esm.sh/aria-hidden@1.2.3.js";
import{RemoveScroll as tn}from"../../../../../../esm.sh/v132/_react-remove-scroll@2.5.6.js";
var te=["Enter"," "],on=["ArrowDown","PageUp","Home"],_e=["ArrowUp","PageDown","End"],cn=[...on,..._e],rn={ltr:[...te,"ArrowRight"],rtl:[...te,"ArrowLeft"]},an={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J="Menu",[N,sn,un]=Ke(J),[O,at]=Ue(J,[un,ve,Ce]),j=ve(),he=Ce(),[be,S]=O(J),[ln,U]=O(J),dn=e=>{let{__scopeMenu:t,open:n=!1,children:o,dir:a,onOpenChange:c,modal:u=!0}=e,p=j(t),[f,m]=D(null),l=h(!1),r=ce(c),d=Ve(a);return R(()=>{let $=()=>{l.current=!0,document.addEventListener("pointerdown",M,{capture:!0,once:!0}),document.addEventListener("pointermove",M,{capture:!0,once:!0})},M=()=>l.current=!1;return document.addEventListener("keydown",$,{capture:!0}),()=>{document.removeEventListener("keydown",$,{capture:!0}),document.removeEventListener("pointerdown",M,{capture:!0}),document.removeEventListener("pointermove",M,{capture:!0})}},[]),s(ge,p,s(be,{scope:t,open:n,onOpenChange:r,content:f,onContentChange:m},s(ln,{scope:t,onClose:I(()=>r(!1),[r]),isUsingKeyboardRef:l,dir:d,modal:u},o)))};var ye=_((e,t)=>{let{__scopeMenu:n,...o}=e,a=j(n);return s(He,g({},a,o,{ref:t}))}),xe="MenuPortal",[$n,Pe]=O(xe,{forceMount:void 0}),pn=e=>{let{__scopeMenu:t,forceMount:n,children:o,container:a}=e,c=S(xe,t);return s($n,{scope:t,forceMount:n},s(q,{present:n||c.open},s(Ze,{asChild:!0,container:a},o)))},x="MenuContent",[fn,re]=O(x),mn=_((e,t)=>{let n=Pe(x,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,c=S(x,e.__scopeMenu),u=U(x,e.__scopeMenu);return s(N.Provider,{scope:e.__scopeMenu},s(q,{present:o||c.open},s(N.Slot,{scope:e.__scopeMenu},u.modal?s(Mn,g({},a,{ref:t})):s(vn,g({},a,{ref:t})))))}),Mn=_((e,t)=>{let n=S(x,e.__scopeMenu),o=h(null),a=G(t,o);return R(()=>{let c=o.current;if(c)return nn(c)},[]),s(ae,g({},e,{ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:v(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),vn=_((e,t)=>{let n=S(x,e.__scopeMenu);return s(ae,g({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),ae=_((e,t)=>{let{__scopeMenu:n,loop:o=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:p,onEntryFocus:f,onEscapeKeyDown:m,onPointerDownOutside:l,onFocusOutside:r,onInteractOutside:d,onDismiss:$,disableOutsideScroll:M,...b}=e,w=S(x,n),A=U(x,n),V=j(n),B=he(n),ue=sn(n),[De,le]=D(null),Y=h(null),Ae=G(t,Y,w.onContentChange),X=h(0),H=h(""),ke=h(0),Q=h(null),de=h("right"),ee=h(0),Fe=M?tn:Ge,Ne=M?{as:en,allowPinchZoom:!0}:void 0,Le=i=>{var C,y;let E=H.current+i,k=ue().filter(P=>!P.disabled),ne=document.activeElement,$e=(C=k.find(P=>P.ref.current===ne))===null||C===void 0?void 0:C.textValue,W=k.map(P=>P.textValue),F=Nn(W,E,$e),pe=(y=k.find(P=>P.textValue===F))===null||y===void 0?void 0:y.ref.current;(function P(fe){H.current=fe,window.clearTimeout(X.current),fe!==""&&(X.current=window.setTimeout(()=>P(""),1e3))})(E),pe&&setTimeout(()=>pe.focus())};R(()=>()=>window.clearTimeout(X.current),[]),Ye();let T=I(i=>{var C,y;return de.current===((C=Q.current)===null||C===void 0?void 0:C.side)&&Gn(i,(y=Q.current)===null||y===void 0?void 0:y.area)},[]);return s(fn,{scope:n,searchRef:H,onItemEnter:I(i=>{T(i)&&i.preventDefault()},[T]),onItemLeave:I(i=>{var C;T(i)||((C=Y.current)===null||C===void 0||C.focus(),le(null))},[T]),onTriggerLeave:I(i=>{T(i)&&i.preventDefault()},[T]),pointerGraceTimerRef:ke,onPointerGraceIntentChange:I(i=>{Q.current=i},[])},s(Fe,Ne,s(Xe,{asChild:!0,trapped:a,onMountAutoFocus:v(c,i=>{var C;i.preventDefault(),(C=Y.current)===null||C===void 0||C.focus()}),onUnmountAutoFocus:u},s(Be,{asChild:!0,disableOutsidePointerEvents:p,onEscapeKeyDown:m,onPointerDownOutside:l,onFocusOutside:r,onInteractOutside:d,onDismiss:$},s(Je,g({asChild:!0},B,{dir:A.dir,orientation:"vertical",loop:o,currentTabStopId:De,onCurrentTabStopIdChange:le,onEntryFocus:v(f,i=>{A.isUsingKeyboardRef.current||i.preventDefault()})}),s(We,g({role:"menu","aria-orientation":"vertical","data-state":Te(w.open),"data-radix-menu-content":"",dir:A.dir},V,b,{ref:Ae,style:{outline:"none",...b.style},onKeyDown:v(b.onKeyDown,i=>{let y=i.target.closest("[data-radix-menu-content]")===i.currentTarget,E=i.ctrlKey||i.altKey||i.metaKey,k=i.key.length===1;y&&(i.key==="Tab"&&i.preventDefault(),!E&&k&&Le(i.key));let ne=Y.current;if(i.target!==ne||!cn.includes(i.key))return;i.preventDefault();let W=ue().filter(F=>!F.disabled).map(F=>F.ref.current);_e.includes(i.key)&&W.reverse(),kn(W)}),onBlur:v(e.onBlur,i=>{i.currentTarget.contains(i.target)||(window.clearTimeout(X.current),H.current="")}),onPointerMove:v(e.onPointerMove,L(i=>{let C=i.target,y=ee.current!==i.clientX;if(i.currentTarget.contains(C)&&y){let E=i.clientX>ee.current?"right":"left";de.current=E,ee.current=i.clientX}}))})))))))});var Se=_((e,t)=>{let{__scopeMenu:n,...o}=e;return s(K.div,g({role:"group"},o,{ref:t}))});var gn=_((e,t)=>{let{__scopeMenu:n,...o}=e;return s(K.div,g({},o,{ref:t}))}),oe="MenuItem",Me="menu.itemSelect",se=_((e,t)=>{let{disabled:n=!1,onSelect:o,...a}=e,c=h(null),u=U(oe,e.__scopeMenu),p=re(oe,e.__scopeMenu),f=G(t,c),m=h(!1),l=()=>{let r=c.current;if(!n&&r){let d=new CustomEvent(Me,{bubbles:!0,cancelable:!0});r.addEventListener(Me,$=>o?.($),{once:!0}),qe(r,d),d.defaultPrevented?m.current=!1:u.onClose()}};return s(Ee,g({},a,{ref:f,disabled:n,onClick:v(e.onClick,l),onPointerDown:r=>{var d;(d=e.onPointerDown)===null||d===void 0||d.call(e,r),m.current=!0},onPointerUp:v(e.onPointerUp,r=>{var d;m.current||(d=r.currentTarget)===null||d===void 0||d.click()}),onKeyDown:v(e.onKeyDown,r=>{let d=p.searchRef.current!=="";n||d&&r.key===" "||te.includes(r.key)&&(r.currentTarget.click(),r.preventDefault())})}))}),Ee=_((e,t)=>{let{__scopeMenu:n,disabled:o=!1,textValue:a,...c}=e,u=re(oe,n),p=he(n),f=h(null),m=G(t,f),[l,r]=D(!1),[d,$]=D("");return R(()=>{let M=f.current;if(M){var b;$(((b=M.textContent)!==null&&b!==void 0?b:"").trim())}},[c.children]),s(N.ItemSlot,{scope:n,disabled:o,textValue:a??d},s(Qe,g({asChild:!0},p,{focusable:!o}),s(K.div,g({role:"menuitem","data-highlighted":l?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0},c,{ref:m,onPointerMove:v(e.onPointerMove,L(M=>{o?u.onItemLeave(M):(u.onItemEnter(M),M.defaultPrevented||M.currentTarget.focus())})),onPointerLeave:v(e.onPointerLeave,L(M=>u.onItemLeave(M))),onFocus:v(e.onFocus,()=>r(!0)),onBlur:v(e.onBlur,()=>r(!1))}))))});var Cn=_((e,t)=>{let{checked:n=!1,onCheckedChange:o,...a}=e;return s(Re,{scope:e.__scopeMenu,checked:n},s(se,g({role:"menuitemcheckbox","aria-checked":Z(n)?"mixed":n},a,{ref:t,"data-state":ie(n),onSelect:v(a.onSelect,()=>o?.(Z(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),_n="MenuRadioGroup",[hn,bn]=O(_n,{value:void 0,onValueChange:()=>{}}),yn=_((e,t)=>{let{value:n,onValueChange:o,...a}=e,c=ce(o);return s(hn,{scope:e.__scopeMenu,value:n,onValueChange:c},s(Se,g({},a,{ref:t})))}),xn="MenuRadioItem",Pn=_((e,t)=>{let{value:n,...o}=e,a=bn(xn,e.__scopeMenu),c=n===a.value;return s(Re,{scope:e.__scopeMenu,checked:c},s(se,g({role:"menuitemradio","aria-checked":c},o,{ref:t,"data-state":ie(c),onSelect:v(o.onSelect,()=>{var u;return(u=a.onValueChange)===null||u===void 0?void 0:u.call(a,n)},{checkForDefaultPrevented:!1})})))}),Ie="MenuItemIndicator",[Re,Sn]=O(Ie,{checked:!1}),En=_((e,t)=>{let{__scopeMenu:n,forceMount:o,...a}=e,c=Sn(Ie,n);return s(q,{present:o||Z(c.checked)||c.checked===!0},s(K.span,g({},a,{ref:t,"data-state":ie(c.checked)})))});var In=_((e,t)=>{let{__scopeMenu:n,...o}=e;return s(K.div,g({role:"separator","aria-orientation":"horizontal"},o,{ref:t}))});var Rn=_((e,t)=>{let{__scopeMenu:n,...o}=e,a=j(n);return s(ze,g({},a,o,{ref:t}))}),Oe="MenuSub",[On,we]=O(Oe),wn=e=>{let{__scopeMenu:t,children:n,open:o=!1,onOpenChange:a}=e,c=S(Oe,t),u=j(t),[p,f]=D(null),[m,l]=D(null),r=ce(a);return R(()=>(c.open===!1&&r(!1),()=>r(!1)),[c.open,r]),s(ge,u,s(be,{scope:t,open:o,onOpenChange:r,content:m,onContentChange:l},s(On,{scope:t,contentId:me(),triggerId:me(),trigger:p,onTriggerChange:f},n)))},z="MenuSubTrigger",Tn=_((e,t)=>{let n=S(z,e.__scopeMenu),o=U(z,e.__scopeMenu),a=we(z,e.__scopeMenu),c=re(z,e.__scopeMenu),u=h(null),{pointerGraceTimerRef:p,onPointerGraceIntentChange:f}=c,m={__scopeMenu:e.__scopeMenu},l=I(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return R(()=>l,[l]),R(()=>{let r=p.current;return()=>{window.clearTimeout(r),f(null)}},[p,f]),s(ye,g({asChild:!0},m),s(Ee,g({id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Te(n.open)},e,{ref:je(t,a.onTriggerChange),onClick:r=>{var d;(d=e.onClick)===null||d===void 0||d.call(e,r),!(e.disabled||r.defaultPrevented)&&(r.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:v(e.onPointerMove,L(r=>{c.onItemEnter(r),!r.defaultPrevented&&!e.disabled&&!n.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),l()},100))})),onPointerLeave:v(e.onPointerLeave,L(r=>{var d;l();let $=(d=n.content)===null||d===void 0?void 0:d.getBoundingClientRect();if($){var M;let b=(M=n.content)===null||M===void 0?void 0:M.dataset.side,w=b==="right",A=w?-5:5,V=$[w?"left":"right"],B=$[w?"right":"left"];c.onPointerGraceIntentChange({area:[{x:r.clientX+A,y:r.clientY},{x:V,y:$.top},{x:B,y:$.top},{x:B,y:$.bottom},{x:V,y:$.bottom}],side:b}),window.clearTimeout(p.current),p.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(r),r.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:v(e.onKeyDown,r=>{let d=c.searchRef.current!=="";if(!(e.disabled||d&&r.key===" ")&&rn[o.dir].includes(r.key)){var $;n.onOpenChange(!0),($=n.content)===null||$===void 0||$.focus(),r.preventDefault()}})})))}),Dn="MenuSubContent",An=_((e,t)=>{let n=Pe(x,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,c=S(x,e.__scopeMenu),u=U(x,e.__scopeMenu),p=we(Dn,e.__scopeMenu),f=h(null),m=G(t,f);return s(N.Provider,{scope:e.__scopeMenu},s(q,{present:o||c.open},s(N.Slot,{scope:e.__scopeMenu},s(ae,g({id:p.contentId,"aria-labelledby":p.triggerId},a,{ref:m,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:l=>{var r;u.isUsingKeyboardRef.current&&((r=f.current)===null||r===void 0||r.focus()),l.preventDefault()},onCloseAutoFocus:l=>l.preventDefault(),onFocusOutside:v(e.onFocusOutside,l=>{l.target!==p.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:v(e.onEscapeKeyDown,l=>{u.onClose(),l.preventDefault()}),onKeyDown:v(e.onKeyDown,l=>{let r=l.currentTarget.contains(l.target),d=an[u.dir].includes(l.key);if(r&&d){var $;c.onOpenChange(!1),($=p.trigger)===null||$===void 0||$.focus(),l.preventDefault()}})})))))});function Te(e){return e?"open":"closed"}function Z(e){return e==="indeterminate"}function ie(e){return Z(e)?"indeterminate":e?"checked":"unchecked"}function kn(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Fn(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function Nn(e,t,n){let a=t.length>1&&Array.from(t).every(m=>m===t[0])?t[0]:t,c=n?e.indexOf(n):-1,u=Fn(e,Math.max(c,0));a.length===1&&(u=u.filter(m=>m!==n));let f=u.find(m=>m.toLowerCase().startsWith(a.toLowerCase()));return f!==n?f:void 0}function Ln(e,t){let{x:n,y:o}=e,a=!1;for(let c=0,u=t.length-1;c<t.length;u=c++){let p=t[c].x,f=t[c].y,m=t[u].x,l=t[u].y;f>o!=l>o&&n<(m-p)*(o-f)/(l-f)+p&&(a=!a)}return a}function Gn(e,t){if(!t)return!1;let n={x:e.clientX,y:e.clientY};return Ln(n,t)}function L(e){return t=>t.pointerType==="mouse"?e(t):void 0}var st=dn,it=ye,ut=pn,lt=mn,dt=Se,$t=gn,pt=se,ft=Cn,mt=yn,Mt=Pn,vt=En,gt=In,Ct=Rn,_t=wn,ht=Tn,bt=An;export{it as Anchor,Ct as Arrow,ft as CheckboxItem,lt as Content,dt as Group,pt as Item,vt as ItemIndicator,$t as Label,dn as Menu,ye as MenuAnchor,Rn as MenuArrow,Cn as MenuCheckboxItem,mn as MenuContent,Se as MenuGroup,se as MenuItem,En as MenuItemIndicator,gn as MenuLabel,pn as MenuPortal,yn as MenuRadioGroup,Pn as MenuRadioItem,In as MenuSeparator,wn as MenuSub,An as MenuSubContent,Tn as MenuSubTrigger,ut as Portal,mt as RadioGroup,Mt as RadioItem,st as Root,gt as Separator,_t as Sub,bt as SubContent,ht as SubTrigger,at as createMenuScope};
//# sourceMappingURL=react-menu.mjs.map